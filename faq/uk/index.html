<!DOCTYPE html>
<html lang="uk">
<head>
    <title>ЧаПи FLibrary</title>
	<meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="img/FLibrary.ico">
    <link id="theme" rel="stylesheet" href="css/style2.css">
</head>
<body>
<div id="content">
 <button id="styles" onclick="toggleTheme()">Стиль</button>
    <script>
        function toggleTheme() {
            let theme = document.getElementById('theme');

            if (theme.getAttribute('href') == 'css/style2.css') {
                theme.setAttribute('href', 'css/style1.css');
            } 
			else {
                theme.setAttribute('href', 'css/style2.css');
            }
                                }
    </script>
  <h1 id="header">Поширені запитання</h1>
<details>
   <summary>&#128211; Чим ця роздача відрізняється від оригінальних?</summary>
<p>Насамперед, чим ця роздача не відрізняється - добіркою книг. Імовірність того, що тут книги немає, а в «оригінальних» роздачах є - мінімальна. Якщо ви знайшли таку книгу - це надзвичайна подія, будь ласка, зв'яжіться зі мною.
<br>Тепер про відмінності.
<br>Основна відмінність - розмір. Заради нього ця роздача і існує.
<br>Додаткові бонуси:</p>
<ul>
<li>Виправлено книги з порушеннями xml-структури.</li>
<li>Виправлено або видалено пошкоджені ілюстрації.</li>
<li>Видалено такі дратівливі для багатьох дублікати (не всі, звичайно)</li>
<li>А ще тут є коментарі читачів з сайту Флібусти та коротка інформація про деяких авторів.</li>
<li>Окрім того, тут можна знайти каталогізатор FLibrary, він кращий, кращий за <s>собаку</s> MyHomeLib.</li>
</ul>
<details>
   <summary class="subtitle"> Чому кількість книг різна?</summary>
<ul class="top10">
<li>Видалено дублікати</li>
<li>Вилучено файли нульового розміру</li>
<li>Вилучено файли, наполовину обірвані</li>
<li>Додано неіндексовані файли, тобто такі, що є в архівах, але відсутні в дампах Флібусти/Лібрусека</li>
</ul>
</details>
<details>
    <summary class="subtitle"> А тоді чому ця роздача значно менша за розміром?</summary>
<p class="subtitle">Зменшення розміру досягнуто так:</p>
<ul>
<li>Тексти книг та зображення зберігаються окремо.</li>
<li>Тексти заархівовані в 7z, що значно ефективніше, ніж zip.</li>
<li>Зображення перекодовані в JPEG XL, який є більш ефективним, ніж JPEG і PNG.</li>
<li>Відгуки та інформація про авторів мають невеликий обсяг, ~1Гб.</li>
<li>Видалені дублікати також дають свої 5% економії</li>
<li>Видалені пошкоджені та такі, що не піддаються відновленню, зображення, але це зовсім мізер</li>
</ul>
<p class="subtitle">Бонус - зображення, відгуки та інформацію про авторів можна взагалі не завантажувати, тоді розмір стане <b>втричі</b> меншим.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Як буде оновлюватися роздача?</summary>
<details>
    <summary class="subtitle"> Так само як «оригінальні», в режимі додавання нових архівів</summary>
<p> <b>(⊙_⊙) Увага!</b> Роздача відбувається шляхом додавання нових архівів; при кожному додаванні створюється новий торрент. Щоб почати завантаження нового архіву, користувачам необхідно зробити наступне:</p>
<ol>
<li>Зупинити завантаження.</li>
<li>Видалити старий торрент у себе з програми-клієнта, але без видалення файлів роздачі.</li>
<li>Завантажити новий торрент і запустити його у себе в програмі-клієнті замість старого, при цьому вказати клієнту шлях до старої папки, куди і має відбуватися завантаження нових архівів.</li>
</ol>
<p>Ваша програма-клієнт при цьому повиненна виконати хешування (перевірку) старої папки (якщо не робить це сама - допоможіть їй це зробити). В результаті вона буде завантажувати тільки ті архіви, яких у Вас ще немає. Старі архіви при цьому не видаляються, а продовжують роздаватися!</p>
<p>Якщо Ви вже видалили старі архіви, то запобігти їх повторному завантаженню можна, прибравши галочки у відповідних місцях при запуску нового торрента. По можливості, бажано не видаляти старі архіви якомога довше. Так Ви допоможете іншим людям завантажити роздачу швидше.</p>
<hr class="lite">
</details>
<p>Буду намагатися оновлювати роздачу на початку місяця.
<br>Оновлення містять:</p>
<ul>
<li>Пара нових 7z-архівів з книгами у форматі fb2, без зображень</li>
<li>4 нових zip-архівів з зображеннями: обкладинки та ілюстрації</li>
<li>Оновлення індексного файлу *.inpx</li>
<li>Заміна дистрибутивів FLibrary на актуальні, якщо вийшов реліз</li>
<li>Оновлення останнього архіву з відгуками читачів + новий (місячний) архів з відгуками читачів</li>
<li>Оновлення останнього архіву з інформацією про авторів + новий архів, якщо назбиралося достатньо нових записів про авторів</li>
</ul>
<p>Таким чином, кожне щомісячне оновлення повинно мінімально зачіпати раніше завантажені файли.</p>
<p>На жаль, такий підхід не є ідеальним для відгуків читачів та для інформації про авторів через регулярне виправлення старих записів на сайті. Тому іноді ці файли будуть перевикладатися всі разом, у міру накопичення правок у старих записах або з технічних причин.</p>
<hr>
</details>

<details>
   <summary>&#128211; Чи буде працювати з цією роздачею мій улюблений каталогізатор?</summary>
<p>Ні, не буде.</p>
<details>
    <summary class="subtitle"> І MyHomeLib не буде?</summary>
<p class="subtitle">І MyHomeLib не буде.</p>
<p class="subtitle">Принаймні не буде належним чином. Так, індексний файл *.inpx у роздачі сумісний із MyHomeLib, тобто створити колекцію зможете. Але навіщо? З неї не вдасться експортувати книги. Та й сама колекція не буде коректною, MyHomeLib не вміє у мультисерійність книг, тому наплодить копії книг, що входять до кількох серій. Коротше, у морг.</p>
</details>
<details>
    <summary class="subtitle"> А xxxLib для yyyOS?</summary>
<p class="subtitle">У мене немає ні можливості, ні бажання перевіряти всі наявні в Інтернеті каталогізатори на сумісність з створеним мною форматом зберігання. Але майже впевнений, що не злетить. Перевірте самі і повідомте спільноту. Результат вашої перевірки додам сюди, з посиланням на вас, зрозуміло.</p>
</details>
<details>
    <summary class="subtitle"> А чому?</summary>
<ul class="top10">
<li>7z</li>
<li>Зображення відокремлені від fb2</li>
</ul>
<p class="subtitle">Ну добре, каталогізатори з підтримкою 7z-архівів, можливо, і працюватимуть, але з обмеженням: отримані ними книги будуть без зображень.</p>
</details>
<details>
   <summary class="subtitle"> І що робити?</summary>
<p>Користуватися FLibrary</p>
<details>
    <summary class="subtitle"> Не можу, у мене лінукс</summary>
<p class="sub_subtitle">Застосовувати wine.</p>
<p class="sub_subtitle">Консольний <a href="https://codeberg.org/aku4wb/flbs" target="_blank">скрипт</a> під лінукс / linux, що працює з цією роздачею, від шановного razobit</p>
<details>
    <summary class="sub_subtitle"> що він вміє=></summary>
<ul class="none_dot">
<li>пошук за автором</li>
<li>пошук за назвою книги</li>
<li>збереження книги з зображеннями в fb2</li>
</ul>
</details>
</details>
<details>
    <summary class="subtitle"> Не можу, у мене Windows 7</summary>
<p class="sub_subtitle">Так, тоді дійсно не зможете. Ця роздача не для вас, вибачте.</p>
<details>
     <summary class="sub_subtitle"> нам пишуть=></summary>
<p class="sub_subtitle">для користувачів Windows 7/2008R2 - <a href="https://github.com/YuZhouRen86/VxKex-NEXT" target="_blank">VxKek</a>, тож використовувати на 7 можна! Найголовніше, щоб пристрій був повністю ізольований від мережі або в повністю закритому мережевому контурі. (c) HedgehogInTheCPP</p>
</details>
</details>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Яким чином повернути в fb2 обкладинки та ілюстрації, що зберігаються окремо ?</summary>
<p>Для роботи з таким форматом зберігання книг у роздачі є каталогізатор FLibrary. При експорті книг з колекції FLibrary повертає зображення в текст fb2. Те ж саме при запуску сторонньої читалки з FLibrary. І при завантаженні книги із OPDS. І через web-інтерфейси. Як завгодно, якщо книга дістається з колекції за допомогою FLibrary, результат буде один - зображення повертаються в fb2, на свої законні місця.</p>
<hr>
</details>

<details>
    <summary>&#128211; Як додати нову колекцію?</summary>
<p>Діалогове вікно додавання або створення нової колекції можна викликати з головного меню програми.</p>
<p class="img"><img src="img/collection/0_400.jpg" alt="&#128558; Йок картинка, бро!" class="img400">
<p>Це ж діалогове вікно з'являється при першому запуску програми.</p>
<p class="img"><img src="img/collection/1_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p>У діалоговому вікні слід вказати:
<br>1. Назву колекції.
<br>2. Шлях до файлу з базою даних.
<br>3. Шлях до папки з архівами книг, там же програма очікує знайти індексний файл *.inpx
<br>13. Шлях до індексного файла *.inpx, якщо він знаходиться в іншій папці ніж архів книг, або якщо потрібно створити колекцію без архіву книг.</p> 
<p>Уникнути помилок при заповненні допоможуть кнопки:
<br>5. Покаже діалогове вікно вибору файлу бази даних.
<br>6. Покаже діалогове вікно вибору папки з архівами книг.
<br>4. Витягне ім'я з індексного файлу колекції, якщо знайде. Щоб це спрацювало, спочатку потрібно вказати 3 або 13.</p>
<p>Якщо щось було заповнено неправильно, про це вкаже рядок сповіщення про помилку 10.</p>
<p>Після правильного заповнення полів 1-3 можна натиснути на кнопку 11. Почнеться процес створення колекції. Це не забере багато часу, залежно від продуктивності процесора і швидкості диска, на якому ви вирішили розмістити базу даних. На моєму комп'ютері створення нової колекції - локальної копії Флібусти займає близько 25 секунд.</p>
<details>
    <summary class="subtitle"> Деталі, нюанси</summary>
<p>В ролі бази даних можна вказати вже наявний файл, наприклад, від більш ранішої версії програми, або взагалі від MyHomeLib. Тоді кнопка 11 змінить текст на «Додати», і замість створення нової колекції буде додана колекція із зазначеного файлу. 
<br><b>(⊙_⊙) УВАГА!</b> Після цього файл бази даних, швидше за все, не буде придатний для використання в тій програмі, в якій був створений, тому що FLibrary змінить його структуру під себе.</p>
<p>Параметри створення колекції:
<br>7. Додавати неіндексовані книги, за замовчуванням увімкнено. До колекції будуть додані знайдені в архівах книги, про які немає записів в індексі архіву. Тобто в архіві є, в індексному файлі - немає.
<br>8. Додавати відсутні в архівах книги, за замовчуванням вимкнено. До колекції будуть додані всі наявні в індексі книги, навіть ті, файлів яких немає в архіві. Тобто симетрично попередньому, в індексі є, в архіві може і не бути.
<br>9. Сканувати неіндексовані архіви, за замовчуванням вимкнено. FLibrary просканує всі архіви у вказаній папці, в тому числі не зазначені в індексному файлі. Тобто можна підсунути в папку з архівами сторонні архіви з книгами у форматі fb2, і вони будуть додані до колекції. Зрозуміло, таке сканування займе більше часу, ніж простий аналіз *.inpx.
<br>12. Позначати неіндексовані книги як видалені, за замовчуванням увімкнено. Неіндексовані файли знаходяться в архіві з історичних причин і зазвичай мають індексовані копії.
<br>14. Тип архіву. При встановленій галочці 8 для проіндексованої книги в папці 3 може не виявитися архіву. Тоді буде записаний архів з ім'ям із індексу і вказаним розширенням. Таке може знадобитися при пошуку потрібної книги без завантаження всієї роздачі.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Як оновити колекцію?</summary>
<p>Завантажуємо оновлення роздачі як зазвичай, при наступному запуску FLibrary виявить зміну індексного файлу *.inpx і запропонує оновити колекцію. Погоджуєтеся, і через кілька секунд все готово. Проте, час від часу є сенс знову створювати колекцію «з нуля», оскільки автоматичне оновлення підтягує тільки відсутні раніше дані. У той час як вже наявні описи можуть містити корисні виправлення. Іноді корисно повторно створити колекцію при оновленні версії FLibrary, особливо якщо це рекомендується на сторінці What's Changed. При повторному створенні колекції не забувайте зберігати дані користувача.</p>
<p>Для http-сервера FLibrary є приховане налаштування <a href="#offlink1"> (див. нижче)</a>, яке спонукає його без повідомлення оновлювати колекцію при зміні *.inpx.</p>
<hr>
</details>

<details>
    <summary>&#128211; Як знайти книгу за назвою, автором, серією?</summary>
<p>За автором і серією краще шукати у відповідних розділах навігації, де можна не тільки шукати за списком, але й фільтрувати його.
<br>Проте існує також можливість пошуку книг за їх назвою, автором або серією.</p>
<p class="img"><img src="img/search/0_1100.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p>Нехай, для прикладу, потрібно знайти книгу В.Нестайко «Тореадори з Васюківки». У програмі реалізовано повнотекстовий пошук за назвами книг, тому не обов'язково вводити всю назву. Достатньо ввести кілька слів, можна не повністю, і не в тій послідовності, в якій вони вказані в назві.</p>
<p class="img"><img src="img/search/1_1100.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p>Натискаємо Enter (або іконку лупи зліва), і програма переходить до розділу навігації «Пошук», у вікні книг показує результати пошуку</p>
<p class="img"><img src="img/search/2_1100.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p>На цьому можна було б і закінчити, але додам:</p>
<ul>
<li>Пошукові запити зберігаються в розділі «Пошук», там їх можна вибрати для повторного використання</li>
<li>Додати пошуковий запит можна в цьому ж розділі, кнопкою з плюсиком</li>
<li>Непотрібний запит можна видалити кнопкою з хрестиком</li>
</ul>
<details>
    <summary class="subtitle"> Накопичилися пошукові запити. Як їх видалити? По одному незручно</summary>
<ol class="top10">
<li>Виділити все (Ctrl+A) або лише непотрібні запити (миша + Ctrl або Shift)</li>
<li>Натиснути кнопку видалення на одному з виділених</li>
<li>Підтвердити видалення у діалоговому вікні, що з'явилося</li>
</ol>
<p class="subtitle">Те ж саме для списку груп.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Чи можна сортувати книги за кількома колонками?</summary>
<p>Можна. Утримуйте Shift, натискаючи на заголовки колонок.</p>
<hr>
</details>

<details>
    <summary>&#128211; Хочу бачити книги тільки однією мовою. Або двома. Можна прибрати інші?</summary>
<p>Можна. Через меню Налаштування/Фільтри, викликаємо діалогове вікно налаштування фільтрів</p>
<p class="img"><img src="img/filter/0_500.jpg" alt="&#128558; Йок картинка, бро!" class="img500"></p>
<p>Переходимо на вкладку «Мови», відзначаємо галочками в колонці «Книги відфільтровані» ті мови, книги на яких не хочемо бачити. Ставимо галочку «Фільтр увімкнено», натискаємо «Застосувати».</p>
<p class="img"><img src="img/filter/1_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>Усе, книги на небажаних мовах приховані. Галочками в колонці «Приховано» можна приховувати мови з навігації (лівої панелі головного вікна).
<br>Подібним чином можна прибрати непотрібних авторів, серії, жанри та ключові слова.</p>
<p><b>(⊙_⊙) Увага!</b> Галочки незалежні - прибравши з навігації якийсь елемент, ви і надалі бачитимете пов'язані з цим елементом книги з інших елементів/розділів навігації. І навпаки, відфільтрувавши книги за якимось елементом навігації, ви надалі бачитимете цей елемент навігації в його розділі, а вибравши його, будете бачити і відфільтровані книги (якщо вони не були відфільтровані за іншим елементом).</p>
<p>У діалоговому вікні працює пошук/фільтр, а у заголовках колонок з галочками є контекстне меню.</p>
<p class="img"><img src="img/filter/2_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p>"Швидкий фільтр" за мовою як і раніше є доступним з контекстного меню заголовка колонки мови в таблиці книг</p>
<p class="img"><img src="img/filter/3_1000.jpg" alt="&#128558; Йок картинка, бро!" class="img1000"></p>
<hr>
</details>

<details>
    <summary>&#128211; Чи можна фізично видалити непотрібні мені книги з архівів?</summary>
<p>Можна. В програму закладена можливість фізичного очищення колекції, з видаленням файлів з архіву і записів з бази даних. Функція видалення файлів з архіву початково заблокована, щоб її розблокувати, потрібно в головному меню «Колекція» вибрати пункт «Дозволити деструктивні операції». Після підтвердження наміру продовжувати і згоди з небезпекою остаточної втрати книг, в контекстному меню книг активується пункт «Видалити назавжди». Він же зробить активною галочку 7 «Видалити назавжди разом з файлами книг з архіву», <a href="#offlink3">див. нижче</a>.</p>
<p class="img"><img src="img/cleanup/0_400.jpg" alt="&#128558; Йок картинка, бро!" class="img400"></p>
<p>Вибір пункту меню «Очищення...» призведе до появи вікна критеріїв очищення колекції.</p>
<p class="img"><img src="img/cleanup/1_1100.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p>FLibrary підтримує наступні критерії:
<br>1. "Видалені" книги. При виборі цього критерію з колекції будуть видалені книги, позначені в базі даних як видалені.
<br>2. Дублікати книг. Програма вважає дублікатом однойменні книги, що мають хоча б одного спільного автора. При виборі цього критерію такі книги будуть видалені, крім однієї, доданої до колекції останньою. Таким чином, дублікатами з-поміж інших опиняться різні видання або різні переклади однієї книги. Будьте обережні.
<br>3. Жанри. Можна відзначити небажані жанри. У цього критерію є додаткове налаштування, реалізоване радіокнопками:</p>
<ul>
<li>Повний збіг. При виборі будуть видалені ті книги, всі жанри яких входять до множини обраних для видалення.</li>
<li>Частковий збіг. Будуть видалені ті книги, у яких хоча б один жанр обраний для видалення. Дуже небезпечна опція.</li>
</ul>
<p class="null">4. Мови. Можна позначити небажані мови. Слід розуміти, що реальна мова тексту багатьох книг не збігається із зазначеною як у описі, так і в метаданих fb2.
<br>5. За розміром. При обрані цього критерію будуть видалені книги, розмір файлу яких менше мінімального або більше максимального значення.
<br>6. За рейтингом. Якщо бібліотечний рейтинг книги нижчий за вказаний і/або рейтинг відсутній, тобто книгу наразі ніхто не оцінив.
<br>9. Збірники.</p>
<p>Після акуратного розставлення галочок натискаємо кнопку 8 «Аналіз колекції», трохи чекаємо аналізу колекції на відповідність зазначеним критеріям, після чого бачимо повідомлення з результатом</p>
<p class="img"><img src="img/cleanup/2_500.jpg" alt="&#128558; Йок картинка, бро!" class="img500"></p>
<p>Це останній шанс передумати і натиснути «Ні». Але якщо натиснути «Так», програма почне процес видалення книг.</p>
<p id="offlink3"><b>(⊙_⊙) УВАГА!</b> Якщо встановлено галочку 7, то файли книг будуть фізично видалені з архівів, а їх записи - з бази даних. Для цього може знадобитися тривалий час, залежно від кількості книг, що видаляються, потужності комп'ютера, продуктивності диска, на якому розташована колекція, тощо. Але не дуже довго. Якщо галочка 7 не встановлена, то книги будуть просто приховані в інтерфейсі FLibrary.</p>
<p>Після закінчення очищення колекції є сенс деактивувати деструктивні операції.</p>
<hr>
</details>

<details>
    <summary>&#128211; Як конвертувати (перетворити) книгу з fb2 у потрібний мені формат?</summary>
<details>
    <summary class="subtitle"> Ліньки так багато читати, а можна швидше?</summary>
<p class="subtitle">Можна. Встановити цей ключ реєстру, відкоригувавши шляхи:</p>
<p class="code">Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\a1e61de4-da10-4015-a7c3-91453cd0e215]
"Name"="Конвертація в epub"
"Number"=dword:00000001
"Type"="ExportToDevice"

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\a1e61de4-da10-4015-a7c3-91453cd0e215\37fe0cd3-35ee-4521-85a9-5b3f00138585]
"Command"="D:\\programs\\MyHomeLib\\converters\\FB2ePub\\Fb2ePub.exe"
"Arguments"="\"%source_file%\" \"D:/books/%author%/[%series%/[%seq_number%-]]%title%.epub\""
"Number"=dword:00000002
"Type"="LaunchApp"

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\a1e61de4-da10-4015-a7c3-91453cd0e215\3b791fea-5942-479d-b7e2-6c3c3f6862cd]
"Command"="mkdir"
"Arguments"="\"D:/books/%author%/[%series%]\""
"Number"=dword:00000001
"Type"="System"
</p>
<hr class="lite">
</details>
<p>У структурі FLibrary немає вбудованих конвертерів, але є можливість долучити будь-який сторонній, якщо він має інтерфейс командного рядка. Наприклад, можна запозичити потрібний конвертер зі збірки MyHomeLib. Для виклику в FLibrary стороннього конвертера потрібно налаштувати скрипти, по одному на кожен бажаний формат.</p>
<p>1. У головному меню вибираємо Налаштування/Скрипти...</p>
<p class="img"><img src="img/convert/0_500.jpg" alt="&#128558; Йок картинка, бро!" class="img500"></p>
<p>2. У вікні, що з'явилося, натискаємо "Додати скрипт"</p>
<p class="img"><img src="img/convert/1_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>3. У верхній частині вікна («Скрипти») з'явиться рядок, в який записуємо бажану назву скрипта.</p>
<p class="img"><img src="img/convert/2_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>Тепер необхідно додати команди скрипта. Які саме - залежить від обраного стороннього конвертера. Типовий набір складається з двох команд: 
<br>1. створити папку 
<br>2. викликати конвертер. 
<br>Отже, додаємо команди.</p>
<p>4. Натискаємо "Додати команду"</p>
<p class="img"><img src="img/convert/3_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>5. У нижній частині вікна «Налаштування команди» з'являться 4 рядки, у першому рядку "Тип" (1) із випадаючого меню обираємо "Системна команда"</p>
<p class="img"><img src="img/convert/4_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>6. У другому рядку "Команда" (2) записуємо <b>mkdir</b> , тобто створити папку.</p>
<p>7. В третьому рядку "Аргументи" (3) вводимо потрібний шлях. <b>(⊙_⊙) УВАГА!</b> Слеші повинні бути в стилі Windows, тобто такі - \ . Кожен аргумент бажано брати в лапки. Приклад:</p>
<p class="code">"d:\books\epub"</p>
<p>Зберігаємо результат - "ОК"</p>
<p class="img"><img src="img/convert/5_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>7. Додаємо команду для запуску конвертера: натискаємо "Додати команду"</p>
<p class="img"><img src="img/convert/6_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>8. У першому рядку "Тип" (1) із випадаючого меню обираємо "Запуск консольної програми", 
<br>після чого натискаємо на іконку вибору програми у другому рядку "Команда" (2)</p>
<p class="img"><img src="img/convert/7_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p class="note">* Призначення четвертого рядка "Робоча папка"(4) - див. нижче <a href="#offlink4">"Деталі, ньюанси"</a></p>
<p>9. У діалоговому вікні вибору файлу вказуємо потрібний сторонній конвертер:</p>
<p class="img"><img src="img/convert/8_900.jpg" alt="&#128558; Йок картинка, бро!" class="img900"></p>
<p>10. Додаємо параметри запуску конвертера в рядку "Аргументи" (3). Для конвертера потрібно вказати шляхи до файлів, вихідного та сконвертованого. Вводимо</p>
<p class="code">"%source_file%" "d:\books\epub\book.epub"</p>
<p>Зберігаємо результат - "ОК"</p>
<p class="img"><img src="img/convert/9_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p>11. Зберігаємо скрипт</p>
<p class="img"><img src="img/convert/10_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p>Усе, скрипт готовий. Відтепер в контекстному меню книг, у підменю Експорт буде пункт "Конвертувати в epub", тобто назва скрипта з п. 3</p>
<p class="img"><img src="img/convert/11_900.jpg" alt="&#128558; Йок картинка, бро!" class="img900"></p>
<p>Якщо його вибрати, у папці d:\books\epub з'явиться файл book.epub.</p>
<p>Ймовірно, мало хто буде конвертувати книги щоразу в один і той самий файл, оскільки хотілося б, щоб файли зберігалися в папках за іменами авторів і мали назви за назвами книг. Для цього в командах скрипта при позначенні папок необхідно використовувати макроси. Наприклад, щоб шлях до книги містив її автора і серію (якщо є), а ім'я файлу - номер у серії (якщо є) і назву книги, в "Аргументи" (3) варто вказати такий рядок:</p>
<p class="code">"d:\books\epub\%author%\[%series%\[%seq_number%-]]%title%.epub"</p>
<p>Повний список наявних макросів можна отримати з контекстного меню редагування Аргументів</p>
<p class="img"><img src="img/convert/12_1200.jpg" alt="&#128558; Йок картинка, бро!" class="img1200"></p>
<details>
    <summary class="subtitle"> Деталі, нюанси</summary>
<ol class="top10">
<li>Слід враховувати особливість деяких конвертерів - вони не можуть створювати папки, тому перед їх запуском необхідно створювати папку через системну команду "mkdir", причому враховуючи повний кінцевий шлях (використовуючи макроси). Тоді при додаванні першої і другої команди, рядки  "Аргументи" будуть виглядати так:
<p class="code">
"d:\books\%author%\[%series%]"

"%source_file%" "d:\books\%author%\[%series%\[%seq_number%-]]%title%.mobi"</p>
</li>
<li>Також слід враховувати, що при конвертації книг з однаковою назвою (скажімо коли ви вирішили завантажити два різних пререклади однієї книги), конвертер буде перезаписувати наступний файл поверх попереднього, тобто в папці буде лише одна книга. Щоб цього уникнути, слід додавати макроси додаткової ідентицікації. Наприклад:
<p class="code">
"%source_file%" "d:\books\epub\%author%\[%series%\[%seq_number%-]]%title%_%db_id%.epub"</p>
</li>
<li>Деякі конвектори в роботі вимагають додаткових команд - ключів запуску, та використання сторонніх файлів налаштувань. Скрипт FLibrary дозволяє прописувати додаткові команди та/або вказувати робочу папку для додаткових файлів програми <a href="#offlink4">(cwd)*</a>. 
<br>Зокрема конвертер fb2 в lrf (fb2lrf.exe - для перетворення в формат древнього соневського рідера Sony PRS-350 (650, 600...)) вимагає ключі для вхідного і вихідного файлу, а також приєднання дефолтного файлу зі стилями. Тому рядок "Аргументи" для цього конвертера виглядатиме так:
<p class="code">
"-i "%source_file%" -o "d:\books\%author%\[%series%\[%seq_number%-]]%title%_%db_id%.lrf" -s "c:\Program Files\FLibrary\converters\fb2lrf\default_styles.sini"</p>
<br>або
<br>
<br>В рядок "Аргументи" записуємо вхідний та вихідний файл з ключами:
<p id="offlink4" class="code">
"-i "%source_file%" -o "d:\books\%author%\[%series%\[%seq_number%-]]%title%_%db_id%.lrf"</p>
<br>а в рядку "Робоча папка" обираємо папку дефолтного файлу зі стилями.
<p class="img"><img src="img/convert/13_1200.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p class="note">* CWD (Current Workind Directory) - це папка, з якої запущена програма, яка є коренем для відносних шляхів відкритих нею файлів. Для прикладу показана робота з конвертером fb2lrf_c.exe, якому потрібен файл з конфігом. Якщо його запустити вручну з його власної папки або, що те саме, запустити програмно (з FLibrary), вказавши його власну папку як CWD, то файл з конфігом можна вказати як -s default_styles.sini. А можна зовсім не вказувати, тому що за замовчуванням він намагається використовувати саме цей файл, і в цьому випадку йому це вдасться.
<br>----------------------------------</p>
</li>
<li>Якщо щоразу ви конвертуєте файли в інше місце - в рядках "Аргументи" слід прописувати відносні шляхи (в такому випадку програма кожного разу запитуватиме шлях до папки призначення):
<p class="code">"%user_destination_folder%\%author%\[%series%]"

"%source_file%" "%user_destination_folder%\%author%\[%series%\[%seq_number%-]]%title%_%db_id%.epub"
</p>
</li>
</ol>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Обрав розділ навігації «Всі книги», як тепер вийти з нього?</summary>
<p>Перейти за будь-яким посиланням з анотації до будь-якої книги.</p>
<p class="img"><img src="img/all_books/0_1000.jpg" alt="&#128558; Йок картинка, бро!" class="img1000"></p>
<hr>
</details>

<details>
    <summary>&#128211; Як дізнатися, чи є в роздачі потрібна мені книга?</summary>
<p id="offlink5">Є кілька варіантів:</p>
<details>
    <summary class="subtitle"> з каталогізатором ( рекомендовано)</summary>
<ol>
<li>Завантажуємо індексний файл *.inpx і один з інсталяторів FLibrary, на свій смак</li>
<li>Встановлюєм FLibrary</li>
<li>Створюємо колекцію за індексним файлом з параметром "Додавати відсутні в архівах книги"</li>
<li>Шукаємо в програмі потрібну книгу</li>
</ol>
</details>
<details>
    <summary class="subtitle"> з файлом вмісту</summary>
<p class="subtitle">Завантажуємо файл contents.7z. В архіві текстові файли у форматі csv, по файлу на мову. Кожен рядок файлу описує одну книгу. Формат: автор, назва, серія (номер у серії), архів, файл. Роздільник - табуляція.
<br>Цей спосіб є доцільним, якщо вас потім задовільнить книга без обкладинки та ілюстрацій. Інакше однаково доведеться завантажувати та встановлювати каталогізатор.</p>
</details>
<details>
    <summary class="subtitle"> з індексним файлом</summary>
<p class="subtitle">Завантажуємо індексний файл *.inpx. Він - це звичайний zip-архів, який містить текстові файли *.inp, де кожен рядок описує одну книгу роздачі. Рядок - це csv, роздільник - байт з кодом 04. Перелік полів:
AUTHOR; GENRE; TITLE; SERIES; SERNO; FILE; SIZE; LIBID; DEL; EXT; DATE; LANG; LIBRATE; KEYWORDS; YEAR; SOURCELIB
<br>У файлах можна здійснювати пошук у тексті за допомогою вашої улюбленої програми для перегляду текстів. Рекомендую вбудовану в Far Manager.
<br>Цей спосіб є доцільним, якщо вас потім задовільнить книга без обкладинки та ілюстрацій. Інакше однаково доведеться завантажувати та встановлювати каталогізатор.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Як отримати потрібну книгу без завантаження роздачі повністю?</summary>
<ol class="top10"> 
<li> Дізнаємося, чи є в роздачі потрібна вам книга, <a href="#offlink5">див.</a> інструкцію вище</li>
<li> Дізнаємося ім'я архіву, в якому знаходиться книга</li>
<li> Завантажуємо цей архів, підкладаємо під FLibrary</li>
<li> Дістаємо файл книги
<br> ...
<br> PROFIT!!!! Тепер книгу можна експортувати з  FLibrary.</li>
</ol>
<details>
    <summary class="subtitle"> Можна навіть не завантажувати архів</summary>
<p class="subtitle">, а замість цього налаштувати скрипт завантаження потрібної книги безпосередньо з сайту Флібусти. Додатково знадобиться якась консольна програма для завантаження файлів з інтернету (наприклад curl), її треба завантажити та встановити. Якщо у вас звичайна версія FLibrary, встановлена інсталятором, то для налаштування скрипта можна використати</p>
<details>
   <summary class="sub_subtitle"> ось такий ключ реєстру=></summary>
<p class="code">Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\933c6488-b061-44d6-82fa-6257a6144f0f]
"Name"="Завантажити з Флібусти"
"Number"=dword:00000001
"Type"="ExportToDevice"

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\933c6488-b061-44d6-82fa-6257a6144f0f\b2206572-8ef6-4a69-8f97-71bcb151505d]
"Command"="mkdir"
"Arguments"="\"c:/books/%author%/[%series%]\""
"Number"=dword:00000001
"Type"="System"

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\933c6488-b061-44d6-82fa-6257a6144f0f\d27e10fd-3816-41b1-af5b-a9a17043ad12]
"Command"="D:\\programs\\curl\\bin\\curl.exe"
"Arguments"="-o \"c:/books/%author%/[%series%/[%seq_number%-]]%title%.zip\" -L \"http://x.flibusta.is/b/%lib_id%/download\""
"Number"=dword:00000002
"Type"="LaunchApp"
</p>
</details>
<p class="subtitle"><b>(⊙_⊙) УВАГА!</b> Шлях до curl у скрипті повинен збігатися з тим, куди ви його встановили. Якщо завантажуєте не curl'ом, а іншою програмою, то треба змінити параметри командного рядка відповідно до його синтаксису. Також за уподобанням виправте шлях, куди будуть завантажуватися книги. У запропонованому файлі реєстру це c:/books.
Якщо ви віддаєте перевагу портативній версії FLibrary, то ви, швидше за все, досвідчений користувач і легко налаштуєте все самостійно. Але якщо раптом виникнуть труднощі - запитуйте, з радістю допоможу.</p>
<p class="subtitle"><b>(⊙_⊙) УВАГА!</b> Працюватиме тільки для книг з Флібусти. Ймовірно, Лібрусек теж надає таку можливість, але посилання буде інше. Якщо знаєте яке - повідомте мені, додамо сюди.</p>
</details>
<details>
    <summary class="subtitle">Можна взагалі обійтися без сторонніх засобів</summary>
<p class="subtitle">, але скрипт все одно доведеться налаштовувати. Однак тепер без curl'а, і вистачить однієї інтегрованої в FLibrary команди:</p>
<ol class="top10">
<li>Додаємо скрипт</li>
<li>Якось його називаємо, наприклад "Завантажити з Флібусти"</li>
<li>Додаємо команду</li>
<li>Вибираємо з випадаючого меню тип  "Вбудована команда"</li>
<li>Вибираємо команду "Завантажити"</li>
<li>Вказуємо налаштування команди (куди класти, звідки завантажувати). Для завантаження з Флібусти в папку t:/ftp зазначаємо
<p class="code">
-o "t:/ftp/%author%/[%series%/[%seq_number%-]]%title%.zip" "http://x.flibusta.is/b/%lib_id%/download"
</p>
<br>У вашому випадку вкажіть будь-який коректний шлях, наприклад c:\books. Чи на ваш розсуд, лише б диск був у системі та були права на запис. Можна також змінити шаблон шляху, в контекстному меню рядка введення аргументів є контекстне меню з доступними макросами.</li>
<li>Зберігаємо результат</li>
</ol>
<p class="subtitle">Після цих нескладних рухів у контекстному меню книг з'явиться пункт меню "Завантажити з Флібусти", після вибору якого книга буде завантажена.
<br>Якщо ваш брандмауер і оператор інтернету не заперечують, звісно.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; У мене вдома 5 комп'ютерів і 3 ноутбуки. Мені потрібно завантажувати роздачу і встановлювати FLibrary на всі ці пристрої?</summary>
<p>Не обов'язково. FLibrary надає деякі мережеві можливості у вигляді кількох http-сервісів. Для доступу до них необхідно запустити наявний в FLibrary http-сервер. Вибираємо пункт меню</p>
<p class="img"><img src="img/http/0_900.jpg" alt="&#128558; Йок картинка, бро!" class="img900"></p>
<p>У діалоговому вікні, що відкрилося => Натискаємо Пуск і все, сервер запущено, тепер можна подивитися на його роботу. Для цього достатньо натиснути на написи, що стали клікабельними.</p>
<p class="img"><img src="img/http/1_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<ol class="top10">
<li><b>Веб-інтерфейс ReactApp.</b> У браузері відкриється сайт, розроблений шановним alloroc2. Тут можна шукати книги за назвою/автором/серією, завантажувати їх і навіть читати прямо там, на сайті. Дуже зручно. Інтерфейс сайту доволі інтуїтивний, а функціональність постійно розширюється.
<details>
    <summary class="sub_subtitle"> Опис від alloroc2=></summary>
<p class="sub_subtitle">Працювати через веб можна в браузері з будь-якого пристрою.
<br>Пошук при введенні тексту відразу з розділенням результатів за назвами, авторами та серіями.
<br>Перегляд груп книг, заздалегідь відібраних у програмі.
<br>Для обраної книги статистика + обкладинка, зміст із зазначенням розділів та місцем їх розташування в книзі.
<br>Обрану книгу можна читати, не виходячи з веб-інтерфейсу каталогізатора.
<br>Для зручності читання, перехід у повноекранний режим, а також прокрутка тексту.
<br>Налаштування шрифту та швидкість прокрутки «гарячими» клавішами.
<br>Прогрес прочитаного запам'ятовується в браузері.
<br>Відкрив вебку, знайшов книгу і випав з реальності.</p>
</details>
</li>
<li><b>Спрощений веб-інтерфейс.</b> Відкриється сторінка в браузері, що відповідає моїм знанням html. Там також є пошук, навігація по колекції, завантаження та читання. Але абсолютно без будь-якого дизайну, крайній мінімалізм. Вельми на поціновувача, але мені цього достатньо.</li>
<li><b>OPDS.</b> Відкриється сторінка в браузері з якимсь JSON'ом. Власне, за цією адресою треба переходити не браузером, а читалкою з підтримкою протоколу OPDS.</li>
</ol>
<p>При увімкненому http-сервері ці адреси доступні з будь-якого пристрою, що знаходиться в одній локальній мережі, тобто на іншому комп'ютері/смартфоні/планшеті можна зайти на два варіанти веб-інтерфейсу, а також підключитися читалкою до каталогу OPDS.</p>
<details>
    <summary class="subtitle"> Це тільки вдома буде працювати? А через інтернет не можна?</summary>
<p class="subtitle">Можна, але прокидати зазначені порти у зовнішній світ доведеться самостійно. Я в цьому не розбираюся настільки, що навіть не впевнений у змістовності попереднього речення. Гугліть «білий IP» і «тунелі CloudFlare.com». Буду вдячний за будь-які розумні слова в особисті повідомлення про це все.</p>
<details>
    <summary class="sub_subtitle"> розумні кажуть=></summary>
<p class="sub_subtitle">
(⊙_⊙) <br> доступ ззовні я прокинув через nginx - просто додав піддомен book.ххх.хх, отримав для нього сертифікат і тепер можна ходити по https, а nginx вже перенаправляє у внутрішній мережі на http.
<br>(c) SoloMen</p>
<hr class="lite">
<p class="sub_subtitle">(⊙_⊙) <br>Зміг з допомогою Tilescale. Що я власне зробив, щоб користуватися:</p>
<ol>
<li>Завантажив сам TileScale (десь на просторах інтернету кажуть, що є його опенсрусь аналог) на тапок і комп;</li>
<li>Увімкнув їх (тапок і комп) у загальну мережу з допомогою Tilescale;</li>
<li>Включив в FLibrary згідно з ЧаПи сервер і додав ту адресу, яка стоїть в Tilescale, в моєму випадку це виявилася прикріплена адреса 100.84.44. 127 (ті, хто теж будуть пробувати такий спосіб, може виявитися інша адреса, дивіться на сайті в панелі управління або в диспетчері завдань, натиснувши на графу з Tilescale, в графі IPv4-адреса під графіком буде власне сама адреса, яку і додаємо) для себе конкретно залишив увімкненим режим opds, його ж адресу і забив у рядок для AlReader'а;</li>
<li>Власне, профiт; 
<br> (c) AncientSUS</li>
</ol>
<p class="subtitle">UPD В налаштуваннях адреси http-сервера можна вказати «Будь-який», тоді сервіси будуть доступні через усі наявні інтерфейси: localhost, 127.0.0.1, локальна IP-адреса, тощо.</p>
</details>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Що за бардак у роздачі з авторами та серіями?</summary>
<p>Це наслідки злиття Флібусти та Лібрусека в рамках однієї роздачі. Справді, неузгодженість іменування авторів та серій на Флібусті та Лібрусеку – серйозна проблема. Плюс різні підходи бібліотек до вирішення колізій повних тезок. Через це деякі імена тут можуть як "роздвоїтися", так і "схлопнутися", внаслідок чого книги одного автора в роздачі можуть бути "прив'язані" до різних, так і навпаки, книги різних авторів приписані одному. Те саме із серіями.</p>
<details>
   <summary class="subtitle"> І що зовсім нічого не можна зробити?</summary>
<p class="subtitle">На жаль, провести узгодження на рівні мережевих бібліотек-джерел книг для цієї роздачі навряд чи вдасться. Нам залишається лише вносити точкові виправлення. Якщо ви помітили, що якийсь автор або серія "роздвоїлися" або "схлопнулися" - повідомте про це мені. Я внесу локальне виправлення, і наступне місячне оновлення виправить ситуацію.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; А це нічого, що мій антивірус лається на роздачу?</summary>
<p>Нічого. На даний час відомо про кілька причин спрацьовування антивірусів на цю роздачу:</p>
<p class="subtitle"> 1. Інсталятор FLibrary_setup.exe.
<br>Файл генерується одним з найпопулярніших інструментів для створення інсталяторів Inno Setup. Можна припустити, що цим же інструментом користуються і вірусописи, тому сигнатури Inno Setup регулярно потрапляють в антивірусні бази. Що з цим робити? Солідні софтверні контори в аналогічних випадках зв'язуються з вендорами, ті підкручують свої бази, і антивіруси перестають помилково реагувати. На жаль, я не солідна контора, у випадку з FLibrary залишається лише довіритися моєму чесному слову і забити на антивірус. Я так і роблю. Ще можна використовувати msi-інсталятор або архів з «портабельною» версією, на них вірустотал жодного разу не лаявся.
<br>Або ретельно вивчити вихідні коди на предмет шкідливості і збирати проект самостійно.</p>
<p class="subtitle">2. У бібліотеці є книга Олега Михайловича Бойцова "Защити свой компьютер на 100% от вирусов и хакеров", файл 166093.fb2 у архіві fb2-166043-168102.7z.
<br>Схоже, деяким антивірусам не подобаються приклади шкідливого коду, що міститься там. На мою думку, це явний перебір і параноя. Якщо ваша читалка не намагається інтерпретувати і запускати скрипти зі сторінок книг - турбуватися немає про що, можна сміливо додавати *.fb2 у винятки антивіруса.</p>
<p class="subtitle">3. Є також книга Чадова Тимофія "Использование ListView в режиме виртуального списка", файл 170704.fb2 у архіві fb2-168103-172702.7z. В неї автор вклав виконуваний exe-файл, на який лаявся щонайменше один вендор з virustotal. Але, наскільки мені відомо, антивіруси поки що не намагаються парсити fb2 з метою декодувати бінарні вкладення з base64, розпакувати отриманий архів, проаналізувати його вміст. Якщо ваша читалка не намагається досліджувати бінарні вкладення книг, на які немає посилань з її сторінок, з метою запуску раптово знайдених там програм, то знову ж таки немає про що турбуватися.</p>
<hr>
</details>

<details>
    <summary>&#128211; Знайшов косяк у програмі, що робити?</summary>
<ol class="top10">
<li>Переконатися, що косяк є в останньому релізі FLibrary. Особливо це стосується описок, безліч яких була знайдена і виправлена під час написання цих інструкцій.</li>
<li>Запостити багрепорт <a href="https://github.com/heimdallr/books/issues" target="_blank"> тут</a>, по можливості описавши косяк, додавши скріншот, etc</li>
</ol>
<p>Якщо немає облікового запису на гітхабі, а регатися ліньки, то можна написати мені в особисті повідомлення. Або залишити повідомлення в темі. Буду вдячний за будь-який відгук. Але тому, хто запостить на гітхаб багрепорт (або фічерреквест, який буде взятий в роботу), буде надана персональна дорелізна збірка FLibrary. Зі згадкою в About.</p>
<hr>
</details>

<details>
    <summary>&#128211; Обіцяють швидку роботу FLibrary, а насправді тормозить. Набрехали?</summary>
<p>Щонайменше у одного користувача спостерігалися перешкоди в роботі програми з боку Microsoft Defender'а, що проявлялося в уповільненні роботи і підвищеному споживанні оперативної пам'яті. Налаштування Defender'а допомогло.</p>
<p>Спробуйте внести в список виключень антивіруса</p>
<ul>
<li>Папку з програмою</li>
<li>Папку з базою даних колекції</li>
<li>Папку з архівами книг</li>
<li>Папку з тимчасовими файлами (%TEMP%)</li>
</ul>
<hr>
</details>

<details>
    <summary>&#128211; У меню є якісь «розваги». Проставив усі галочки, що далі?</summary>
<p>Розважальний контент з'являється замість порожньої анотації, коли у вікні книг не вибрано жодної книги.</p>
<details>
    <summary class="subtitle">Наприклад</summary>
<p class="img"><img src="img/entertainment/0_800.jpg" alt="&#128558; Йок картинка, бро!" class="img800"></p>
<p class="img"><img src="img/entertainment/1_800.jpg" alt="&#128558; Йок картинка, бро!" class="img800"></p>
<p class="img"><img src="img/entertainment/2_800.jpg" alt="&#128558; Йок картинка, бро!" class="img800"></p>
</details>
<details>
    <summary class="subtitle">Бачу порожню анотацію, де жарти?</summary>
<p class="subtitle">Щоб це працювало, потрібно мати доступ а) до Інтернету, б) до сервісів, які надають контент. Слід враховувати, що деякі сервіси можуть перестати працювати. А до деяких немає доступу з вашої локації без VPN.
<br>З метою діагностики проблеми можна прихованим настроюванням включити показ помилок отримання розважального контенту.</p>
</details>
<details>
    <summary class="subtitle">Чому все англійською?</summary>
<p class="subtitle">Якщо знайдете (або запровадите свій) подібний загальнодоступний (без реєстрації та смс) сервіс іншою мовою — повідомте мене, я додам його. </p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Для чого в роздачі така кількість інсталяторів FLibrary?</summary>
<p class="subtitle" style="text-align:center"><i>
Three Rings for the Elven-kings under the sky
<br>Seven for the Dwarf-lords in their halls of stone
<br>Nine for Mortal Men doomed to die
</i></p>
<p><b>I FLibrary_setup_x.y.z.exe</b>
<br>Генерується InnoSetup. Основний інсталятор, найбільш зручний і функціональний. Дає можливість</p>
<ul>
<li>Вибрати мову інсталятора</li>
<li>Вибрати режим встановлення тільки для мене/для всіх</li>
<li>Запустити програму відразу після встановлення</li>
</ul>
<p>Є нюанс: його не люблять деякі антивіруси. Кому довіряти, антивірусу чи нам з Jordan Russell і Martijn Laan — вирішуйте самі..</p>
<p><b>II FLibrary_setup_x.y.z.msi</b>
<br>Microsoft Windows Installer. Швидше за все, я просто не вмію його готувати, але</p>
<ul>
<li>Мова інсталятора одна і для універсальності англійська</li>
<li>Програма встановлюється тільки для всіх, в `C:\Program Files`</li>
<li>Після завершення роботи інсталятора автоматично нічого не запускається</li>
</ul>
<p>Буду радий, якщо мене навчать, як зробити msi гладеньким і шовковистим.</p>
<p><b>III FLibrary_portable_x.y.z.7z</b>
<br>Це взагалі не інсталятор, а просто архів з бінарними файлами. Розпаковувати і налаштовувати ярлики запуску доведеться самостійно, вручну. Встановлена таким чином програма зберігає свої налаштування не в реєстрі, а в ini-файлі, що знаходиться поруч, типу portable. Отже, розпаковувати треба туди, де є доступ на запис.</p>
<p><b>Ну і який же встановлювати?</b>
<br>Вміст усіх інсталяторів практично ідентичний, можна встановлювати будь-який, на своє уподобання та досвід. Але раджу перший варіант, оскільки сам використовую саме його. Решта два майже ніколи не тестуються.</p>
<hr>
</details>

<details>
    <summary>&#128211; А де програма зберігає ...?</summary>
<details>
    <summary class="subtitle">налаштування</summary>
<p id="offlink2">Звичайна версія (встановлена інсталятором) - гілка реєстру HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary</p>
<p>Портабельна версія (з архіву) - файл FLibrary.ini в папці програми/</p>
</details>
<details>
    <summary class="subtitle">журнал работы (логи)</summary>
<p>Файл %TEMP%\HomeCompa.FLibrary.log
<br>Останні записи логу можна переглянути безпосередньо в програмі, натиснувши Esc. Або через меню Налаштування/Вигляд/Журнал/Показати.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; А можна повний список прихованих налаштувань FLibrary?</summary>
<p id="offlink1">Мало кому потрібні речі, тому їх немає в інтерфейсі, щоб не захаращувати.</p>
<p class="subtitle"><b>(⊙_⊙) УВАГА!!! Ці налаштування слід додавати за необхідності, за замовчуванням у сховищі налаштувань їх немає.
<br>Де шукати налаштування - див.</b> <a href="#offlink2">"А де програма зберігає ...?"</a></p>
<ul class="top10">
<li>v2.0.0 `Preferences/LibRate/symbol`, число за замовчуванням 11088 - ascii или utf-8 код символу зірочки ⭐ для колонки рейтингу в бібліотеці-джерелі. Коди різних символів можна подивитися <a href="https://www.w3schools.com/charsets" target="_blank">тут</a>. Можна використовувати ті, що мають в Hex не більше чотирьох знаків.</li>
<li>v2.1.2 `Preferences/hideScrollBars`, строка (true | false) за замовчуванням true - керує видимістю скролбарів. Якщо задати “false”, скролбари не будуть ховатися.</li>
<li>v2.1.4 `Preferences/GenresSortMode`, строка (SortByCode | SortByName | SortByChildCount | SortByCodeDesc | SortByNameDesc | SortByChildCountDesc), за замовчуванням SortByCode - режим сортування жанрів</li>
<li>v2.1.4 `Preferences/opds/BookEntryLimit`, число DWORD, за замовчуванням 25 - ліміт на кількість книг, що передається одним списком по http.</li>
<li>v2.2.0 Не налаштування, але прихована функціональність. Комбінація Alt+Shift+Q призведе до появи вікна, в якому можна виконувати SQL-запити до бази даних колекції. Результати виконання запитів - в логах</li>
<li>v2.2.1 `Preferences/opds/transliterate`, строка (true | false) за замовчуванням false - транслітерація назви файлу, завантаженого по http.</li>
<li>v2.2.1 `Preferences/LibRate/precision`, число DWORD, за замовчуванням -1 - замінює зірочки рейтингу книги в бібліотеці на число із визначеною цим параметром точністю. Для дійсно середнього рейтингу по Флібусті знадобитися файл reviews\additional.zip. За відсутності цього налаштування або при його значенні -1 показуються зірочки.</li>
<li>v2.2.1 `Preferences/LibRate/colors/2.0`, `ui/Books/LibRate/colors/3.0`, `ui/Books/LibRate/colors/4.5`тощо. Число DWORD, що відповідає кольору у форматі RRGGBB. Для градієнтного забарвлення цифр рейтингу з попереднього пункту.</li>
<li>v2.2.2 `Preferences/AnnotationJokes/Visible`, строка (true | false) за замовчуванням true - при встановленні в “false” відключає функціональність розважального контенту в порожній анотації</li>
<li>v2.2.2 `Preferences/AnnotationJokes/%ApiName%Visible`, строка (true | false) за замовчуванням true - при встановленні в “false” відключає роботу %ApiName%, ховає відповідний пункт меню “Налаштування/Вигляд/Анотація/Розваги/%ApiNameTitle%”. Є сенс відключити ті API, які є недоступними у вашій місцевості. Або ті, що перестали працювати.</li>
<li>v2.3.0 `Preferences/opds/ReadUrlTemplate` Шаблон посилання на читалку з Web. Наприклад, якщо встановити в "http://127.0.0.1:44080/#/reader?url=http://%HTTP_HOST%:%HTTP_PORT%/Images/fb2/%1" то можна читати книжки ліберамою. Для цього лібераму спочатку треба <a  href="https://github.com/bookpauk/liberama" target="_blank">завантажити</a>, налаштувати і запустити. Можливо, цьому налаштуванню колись знайдеться й інше застосування.</li>
<li>v2.3.0 `Preferences/opds/SeparatedSearch`, строка (true | false) за замовчуванням false - для OPDS і Web-інтерфейсу включає режим роздільного пошуку за авторами, серіями, назвами книг, все разом.</li>
<li>v2.3.0 `Preferences/opds/AutoupdateCollection`, строка (true | false) за замовчуванням false - при встановленні в `true` http-сервер (opds.exe) відстежуватиме inpx і, у разі його зміни, автоматично оновить колекцію.</li>
<li>v2.4.1 `Preferences/StartFocusedControl`, строка (SearchBooksByNames | NavigationSearchAndFilter | BooksSearchAndFilter) за замовчуванням SearchBooksByNames - поле введення, активне при запуску програми.</li>
<li>v2.4.1 `Preferences/Alphabets/LinkedControl`, строка (SearchBooksByNames | NavigationSearchAndFilter | BooksSearchAndFilter) - поле ввода, з яким працює панель алфавітів. За замовчуванням - не вказано, панель алфавітів працює з активним полем ввода, тобто з тим, в якому зараз знаходиться курсор.</li>
<li>v2.4.1 `Preferences/CommonBooksTableColumnSettings`, строка (true | false) за замовчуванням false - при встановленні в `true` налаштування стовпців таблиці книг стане загальним для всіх режимів навігації.</li>
<li>v2.5.0 `Preferences/AnnotationReviewSortMode`, строка (Time | Reviewer | Text | TimeDesc | ReviewerDesc | TextDesc), за замовчуванням Time - режими сортування відгуків читачів в анотації.</li>
<li>v2.5.4 `Preferences/HideToTray`, строка (true | false) за замовчуванням false - при встановленні в `true` програма по Alt+F4 і по натисканню на хрестик в головному вікні ховається в системний трей. Вихід через головне меню і по гарячій клавіші закриває програму.</li>
<li>v2.5.4 `Preferences/MultipleInstance`, строка (Enabled | Disabled | Dialog) - налаштовує можливість запуску декількох екземплярів FLibrary. Enabled - можна запустити кілька екземплярів, Disabled - не можна, при запуску наступного екземпляра програми буде показуватися вже наявний, Dialog - при запуску наступного екземпляра буде показано діалогове вікно. За замовчуванням - Enabled. Але якщо встановлено режим HideToTray (див. вище), то завжди Disabled, незалежно від встановленого значення налаштування.</li>
<li>v2.5.4 `Preferences/Export/TransliterationMode, строка (None | FileNameOnly | AllExceptUserPath | All) - налаштовує транслітерацію імен файлів, що експортуються. За замовчуванням - None, тобто не транслітерувати. FileNameOnly - буде транслітеровано ім'я файлу, AllExceptUserPath - транслітерувати шлях експорту, крім вибраної користувачем папки (%user_destination_folder%), All - транслітерувати весь шлях експорту.</li>
<li>v2.5.4 `Preferences/Interaction/Book/OnLink`, строка (Read | ExtractAsFb2 | ExtractAsZip) - налаштовує поведінку програми при кліку на посилання-заголовок книги в анотації. За замовчуванням - Read - відкрити книгу в читалці. ExtractAsIs - видобути книгу. ExtractAsZip - видобути книгу і запакувати її в zip-архів.</li>
<li>v2.5.4 `Preferences/Interaction/Book/OnDoubleClick`, строка (Read | ExtractAsFb2 | ExtractAsZip) - налаштовує поведінку програми при подвійному кліку на рядку в таблиці книг, значення ті ж, що і в попередньому налаштуванні.</li>
<li>v2.5.4 `Preferences/RelativePaths', строка  (true | false) за замовчуванням false - при встановленні в `true` програма буде зберігати в налаштуваннях відносні шляхи (читалка, скрипти, ...)</li>
<li>v2.5.5 `Preferences/ReadMark/color' - колір мітки прочитаних книг - число DWORD, відповідно до кольору у форматі AABBGGRR, де АА - значення прозорості, а BBGGRR - значення для кожного з кольорів RGB (! Зверніть увагу на послідовність кольорів => B-G-R !). Також слід враховувати, що AA - інвертовано, тобто при значенні прозорості FF (непрозоро 100%) - колір стане повністю прозорим і його не буде видно. 
<br>Встановлення кольору не є обов'язковим для застосування, для виділення прочитаного взагалі можна не вказувати параметр 'color', а вказати лише параметр 'width', в цьому варіанті кольором мітки буде колір тексту (тобто у світлій темі — чорний, у темній — білий). 
<br><b>(⊙_⊙)</b> Книга стає "прочитаною" при встановленні для неї власного рейтингу.</li>
<li>v2.5.5 `Preferences/ReadMark/width', число DWORD, за замовчуванням `0` - ширина мітки прочитаних книг.
<br>Значення '0' прибирає позначку.
<br>У зв'язку з відмінностями інтерфейсів "Список" і "Дерево", рекомендується використовувати значення чисел від 1 до 9. При використанні двозначних чисел, готуйтеся до того, що позначка, яка має гарний вигляд у "Списку", у "дерев'яному" режимі відображення буде виглядати "непрезентабельно".</li>
<li>v2.5.5 `Preferences/opds/converter', розділ для керування конвертацією файлів, що завантажуються за http (opds, web-інтерфейси). Ключі:
<ul>
<li>Preferences/opds/converter/command, строка - шлях до виконуваного файлу (утиліти командного рядка) конвертера</li>
<li>Preferences/opds/converter/arguments, строка - параметри конвертера, за замовчуванням "%src%" "%dst%". Використовуються такі підстановки (макроси): %src% - конвертований .fb2-файл книги, %dst% - файл-результат</li>
<li>Preferences/opds/converter/cwd, строка - робоча директорія для конвертера, що запускається, за замовчуванням - папка з FLibrary.exe</li>
<li>Preferences/opds/converter/ext, строка - розширення файлу після конвертації</li>
</ul>
<b>(⊙_⊙) УВАГА!</b> На web перестане працювати читання. Якщо комусь актуально – повідомте, будь ласка.
</li>
<li>v2.5.5 `Preferences/AnnotationJokes/ShowErrors`, строка  (true | false) за замовчуванням `false` - при встановленні в 'true' у разі помилки отримання розважального контенту показуватиметься її текст.</li>
<li>v2.5.5 `Preferences/Books/Alignment', розділ для керування вирівнюванням полів у таблиці книг. У цьому розділі можна заводити ключі з ім'ям поля та значенням вирівнювання.
<br>Можливі імена полів (ключів): Author, Title, Series, SeqNumber, Genre, Folder, FileName, Size, LibRate, UserRate, UpdateDate, Year, Lang
<br>Можливі значення вирівнювання: AlignLeft, AlignRight, AlignCenter. Якщо цікаво, можна поекспериментувати зі значеннями <a href="https://doc.qt.io/qt-6/qt.html#AlignmentFlag-enum" target="_blank">звідси</a>
</li>
<li>v2.5.5 `Preferences/UserRate/symbol`, число за замовчуванням 11088 - ascii или utf-8 код символу зірочки ⭐ для колонки рейтингу користувача.</li>
<li>v2.5.5 `Preferences/UserRate/noRateSymbol`, ascii или utf-8 код символу для книг з рейтингом "Без оцінки".</li>
<li>v2.5.6 `Preferences/Books/ContextMenu/HashEnabled`, строка  (true | false) за замовчуванням false - при встановленні в 'true' додає в контекстне меню книг підменю "Хеш" з елементами "Обчислення" та "Порівняння". Для тих, хто цікавиться детектором дублів.</li>
</ul>
<hr class="lite">
<details>
   <summary class="subtitle"> Прочитав ЧаПи про приховані налаштування. "Нічого не зрозумів, але було цікаво &copy;".</summary>
<p class="sub_subtitle">Дивно, до вас ніхто не скаржився. Що ж, давайте розжую. Ви захотіли замінити символ зірочки...</p>
<details>
    <summary class="sub_subtitle">Якщо у вас портативна версія FLibrary, то:</summary>
<ol>
<li>Закрийте FLibrary</li>
<li>Відкрийте в текстовому редакторі файл FLibrary.ini з папки програми</li>
<li>Знайдіть у ньому розділ [Preferences] і додайте до нього рядок `LibRate\symbol=9734`</li>
<li>Збережіть файл</li>
<li>Запустіть FLibrary</li>
</ol>
<p class="img"><img src="img/hide_set/1_500.jpg" alt="&#128558; Йок картинка, бро!" class="img500"></p>
<p class="note">* Замість числа 9734 підберіть інше, на свій смак, наприклад <a href="https://www.w3schools.com/charsets/ref_utf_symbols.asp" target="_blank">звідси</a>.</p>
<hr class="lite">
</details>
<details>
    <summary class="sub_subtitle">Якщо ваша версія FLibrary встановлена інсталятором, то:</summary>
<ol>
<li>Закрийте FLibrary</li>
<li>Запустіть редактор реєстру</li>
<li>Перейдіть до гілки `HKEY_CURRENT_USER\Software\HomeCompa\FLibrary\Preferences`</li>
<li>Створіть (якщо його там немає) у цій гілці підрозділ `LibRate`</li>
<li>Створіть у цьому підрозділі DWORD параметр `symbol`</li>
<li>Встановіть для цього параметра десяткове значення 9734 (воно ж шістнадцяткове 2606)</li>
<li>Запустіть FLibrary</li>
</ol>
<p class="img"><img src="img/hide_set/0_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p class="note">* Замість числа 9734 підберіть інше, на свій смак, наприклад <a href="https://www.w3schools.com/charsets/ref_utf_symbols.asp" target="_blank">звідси</a>.</p>
<hr class="lite">
</details>
<hr class="lite">
</details>
<details>
   <summary class="subtitle"> Налаштував конвертацію в epub для файлів, які завантажую через web (opds), однак і надалі отримую fb2.</summary>
<p class="subtitle"> Перш за все перевірте шляхи (розділи) реєстру на відповідність. 
<br>В "Computer\HKEY_CURRENT_USER\Software\HomeCompa\FLibrary" вже є розділ opds, по дереву вище потрібного розділу з параметрами "Preferences", це не він. 
<br>Усі необхідні розділи та підрозділи потрібно створювати в "Preferences"</p>
<p class="img"><img src="img/hide_set/3_1000.jpg" alt="&#128558; Йок картинка, бро!" class="img1000"></p>
<p class="subtitle">Після чого перевірте на помилки ключі (строки). 
<br>Для більшості конверторів обов'язковими є лише два ключі  "command" и "ext", а ключі "arguments" і "cwd" вказуємо за власним бажанням або за потребою. </p>
<p class="note"> * призначення "CWD" - див.<a href="#offlink4">"Як конвертувати (перетворити) книгу з fb2 у потрібний мені формат?"</a>
<br>.</p>
<details>
    <summary class="sub_subtitle">Ось так виглядає файл .reg з усіма прописаними ключами=></summary>
<p class="code">Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\HomeCompa\FLibrary\Preferences\opds\converter]
"ext"="epub"
"command"="C:\\Program Files\\fb2epub\\Fb2ePub.exe"
"arguments"="\"%src%\" \"%dst%\""
"cwd"="C:\\Program Files\\fb2epub"

</p>
</details>
</details>
<hr>
</details>
<h2 id="footer"> <a href="https://github.com/heimdallr" target="_blank">Copyright (c) 2021-2026 Александр Чирятьев</a>
<br>----------
<br>Переклад виконав <a href="https://github.com/Jurchos" target="_blank">Юрій Шатров ака Jurchos</a></h2>
</div>
</body>
</html>
