<!DOCTYPE html>
<html lang="ru">
<head>
     <title>ЧаВо FLibrary</title>
     <meta charset="UTF-8">
     <link rel="icon" type="image/x-icon" href="img/FLibrary.ico">
	 <link id="theme" rel="stylesheet" href="css/style2.css">
</head>
<body>
<div id="content">
  <button id="styles" onclick="toggleTheme()">Стиль</button>
    <script>
        function toggleTheme() {
            let theme = document.getElementById('theme');

            if (theme.getAttribute('href') == 'css/style2.css') {
                theme.setAttribute('href', 'css/style1.css');
            } 
			else {
                theme.setAttribute('href', 'css/style2.css');
            }
                                 }
    </script>
    <h1 id="header">Часто задаваемые вопросы</h1>
<details>
    <summary>&#128211; Чем эта раздача отличается от оригинальных?</summary>
<p>Прежде всего, чем эта раздача не отличается - набором книг. Вероятность того, что здесь книги нет, а в "оригинальных" раздачах есть - минимальна. Если вы нашли такую книгу - это ЧП, пожалуйста, свяжитесь со мной.
<br>Теперь про отличия.
<br>Главное отличие - размер. Ради него эта раздача и существует.
<br>Дополнительные плюшки:</p>
<ul>
<li>Починены книги с нарушениями xml-структуры.</li>
<li>Починены или удалены битые иллюстрации.</li>
<li>Устранены столь раздражающие многих дубли (не все, конечно)</li>
<li>А ещё тут есть комментарии читателей с сайта Флибусты и краткая информация о некоторых авторах.</li>
<li>Кроме того, здесь раздаётся каталогизатор FLibrary, он лучше, лучше <s>собаки</s> MyHomeLib.</li>
</ul>
<details>
	<summary class="subtitle"> Почему различается количество книг?</summary>
<ul class="top10">
<li>Удалены дубли</li>
<li>Выброшены файлы нулевого размера</li>
<li>Выброшены файлы, оборванные посередине</li>
<li>Добавлены неиндексированные файлы, т.е. такие, что в архивах есть, а в дампах Флибусты/Либрусека - нет</li>
</ul>
</details>
<details>
	<summary class="subtitle"> А почему тогда эта раздача настолько меньше по размеру?</summary>
<p class="subtitle">Уменьшение размера достигнуто так:</p>
<ul>
<li>Текст книг и иллюстрации хранятся раздельно.</li>
<li>Тексты пережаты в 7z, что значительно эффективнее, чем zip.</li>
<li>Картинки перекодированы в JPEG XL, который эффективнее JPEG и PNG.</li>
<li>Отзывы и информация об авторах невелики по объёму, ~1Гб.</li>
<li>Удалённые дубли тоже дают свои 5% экономии</li>
<li>Удалены битые и не поддающиеся починке картинки, но это совсем копейки</li>
</ul>
<p class="subtitle">Бонус - картинки, отзывы и инфу про авторов можно вообще не скачивать, тогда размер ещё <b>втрое</b> меньше.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Как будет обновляться раздача?</summary>
<details>
    <summary class="subtitle"> Так же как "оригинальные", в режиме добавления новых архивов</summary>
<p><b>(⊙_⊙) Внимание!</b> Раздача ведётся путём добавления новых архивов; при каждом добавлении создаётся новый торрент. Чтобы начать докачку нового архива, пользователям необходимо сделать следующее:</p>
<ol>
<li>Остановить скачивание.</li>
<li>Удалить старый торрент у себя из клиента, но без удаления файлов раздачи.</li>
<li>Скачать новый торрент и запустить его у себя в клиенте вместо старого, при этом указать клиенту путь в старую папку куда и должно происходить скачивание новых архивов.</li>
</ol>
<p>Ваш клиент при этом должен произвести хеширование (проверку) старой папки (если не производит сам - помогите ему сделать это). В результате он будет докачивать только те архивы, которых у Вас ещё нет. Старые архивы при этом не удаляются, а продолжают раздаваться!</p>
<p>Eсли Вы уже удалили старые архивы, то предотвратить их повторную закачку можно, сняв галочки в соответствующих местах при запуске нового торрента. По возможности, желательно не удалять старые архивы как можно дольше. Так вы поможете другим людям скачать раздачу быстрее.</p>
<hr class="lite">
</details>
<p>Буду стараться обновлять раздачу в начале месяца.
<br>Обновления содержат:</p>
<ul>
<li>Пара новых 7z-архивов с книгами в формате fb2, без картинок</li>
<li>4 новых zip-архива с картинками: обложки и иллюстрации</li>
<li>Обновление индексного файла *.inpx</li>
<li>Замена дистрибов FLibrary на актуальные, если случился релиз</li>
<li>Обновление последнего архива с отзывами читателей + новый (месячный) архив с отзывами читателей</li>
<li>Обновление последнего архива с информацией об авторах + новый архив, если накопилось достаточно новых записей об авторах</li>
</ul>
<p>Таким образом, каждое месячное обновление должно по минимуму затрагивать ранее загруженные файлы.</p>
<p>К сожалению, такой подход неидеален для отзывов читателей и информации об авторах из-за регулярной правки старых записей на сайте. Поэтому иногда эти файлы будут перевыкладываться оптом, по мере накопления правок в старых записях. Или по чисто техническим причинам.</p>
<hr>
</details>

<details>
    <summary>&#128211; Будет ли работать с этой раздачей мой любимый каталогизатор?</summary>
<p>Нет, не будет.</p>
<details>
    <summary class="subtitle"> И MyHomeLib не будет?</summary>
<p class="subtitle">И MyHomeLib не будет.</p>
<p class="subtitle">По крайней мере, не будет в должной мере. Да, индексный файл *.inpx в раздаче совместим с MHL, то есть создать коллекцию сможете. Но зачем? Из неё не получится экспортировать книги. Да и сама коллекция не будет корректной, MHL не умеет в мультисерийность книг, поэтому наплодит копии книг, входящих в несколько серий. Короче, в морг.</p>
</details>
<details>
    <summary class="subtitle"> А xxxLib для yyyOS?</summary>
<p class="subtitle">У меня нет ни возможности, ни желания, чтобы проверять все имеющиеся на просторах интернета каталогизаторы на совместимость с придуманным мной форматом хранения. Но почти уверен, что не взлетит. Проверьте сами и сообщите общественности. Результат вашей проверки добавлю сюда, со ссылкой на вас, разумеется.</p>
</details>
<details>
    <summary class="subtitle"> А почему?</summary>
<ul class="top10">
<li>7z</li>
<li>Картинки отделены от fb2</li>
</ul>
<p class="subtitle">Ну ладно, каталогизаторы с поддержкой 7z-архивов может и будут работать, но с ограничением: извлечённые ими книги будут без картинок.</p>
</details>
<details>
    <summary class="subtitle"> И что делать?</summary>
<p>Использовать FLibrary</p>
<details>
    <summary class="subtitle"> Не могу, у меня линукс</summary>
<p class="sub_subtitle">Использовать wine</p>
<p class="sub_subtitle">Консольный <a href="https://codeberg.org/aku4wb/flbs" target="_blank">скрипт</a> под линукс / linux, работающий с этой раздачей, от уважаемого razobit</p>
<details>
    <summary class="sub_subtitle">что он умеет=></summary>
<ul class="none_dot">
<li>поиск по автору</li>
<li>поиск по названию книги</li>
<li>извлечение книги с изображениями в fb2</li>
</ul>
</details>
</details>
<details>
    <summary class="subtitle"> Не могу, у меня Windows 7</summary>
<p class="sub_subtitle">Да, тогда действительно не можете. Раздача не для вас, извините.</p>
<details>
    <summary class="sub_subtitle">нам пишут=></summary>
<p class="sub_subtitle">для пользователей Windows 7/2008R2 <a href="https://github.com/YuZhouRen86/VxKex-NEXT" target="_blank">VxKek</a> - так что использовать на 7 можно! Самое главное, чтобы машина была полностью изолированной от сети или в полностью закрытом сетевом контуре. (c) HedgehogInTheCPP</p>
</details>
</details>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Как вернуть в fb2 хранящиеся отдельно обложки и иллюстрации?</summary>
<p>Для работы с таким форматом хранения книг в раздаче есть каталогизатор FLibrary. При экспорте книг из коллекции FLibrary возвращает картинки в тело fb2. То же самое при запуске внешней читалки из FLibrary. И при скачивании книги по OPDS. И через web-интерфейсы. Как угодно, если книга извлекается из коллекции при помощи FLibrary, результат будет один - картинки возвращаются в fb2, на свои законные места.</p>
<hr>
</details>

<details>
    <summary>&#128211; Как добавить новую коллекцию?</summary>
<p>Диалог добавления или создания новой коллекции можно вызвать из главного меню программы.</p>
<p class="img"><img src="img/collection/0_400.jpg" alt="&#128558; Йок картинка, бро!" class="img400">
<p>Этот же диалог показывается при первом запуске программы.</p>
<p class="img"><img src="img/collection/1_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p>В диалоге следует указать:
<br>1. Имя коллекции
<br>2. Путь к файлу с базой данных
<br>3. Путь к папке с архивами книг, там же программа ожидает найти индексный файл *.inpx
<br>13. Путь к индексной файлу *.inpx, если он находится в другой папке, чем архив книг, или если нужно создать коллекцию без архива книг.</p>
<p>Избежать ошибок при заполнении помогут кнопки:
<br>5. Покажет диалог выбора файла базы данных
<br>6. Покажет диалог выбора папки с архивами книг
<br>4. Извлечёт имя из индексного файла коллекции, если найдёт. Чтобы это сработало, надо сначала указать 3 или 13.</p>
<p>Если что-то было заполнено неверно, об этом скажет строка сообщения об ошибке 10.</p>
<p>После правильного заполнения полей 1-3 можно нажать на кнопку 11. Начнётся процесс создания коллекции. Это не займёт много времени, в зависимости от производительности процессора и скорости диска, на котором вы решили расположить базу данных. На моём компе создание новой коллекции - локальной копии Флибусты занимает около 25 секунд.</p>
<details>
    <summary class="subtitle"> Детали, нюансы</summary>
<p>В качестве базы данных можно указать уже имеющийся файл, например, от более ранней версии программы, или вообще от MyHomeLib. Тогда кнопка 11 поменяет текст на "Добавить", и вместо создания новой коллекции будет добавлена коллекция из указанного файла. 
<br><b>(⊙_⊙) ВНИМАНИЕ!</b> После этого файл базы данных скорее всего не будет пригоден к использованию в той программе, в которой был создан, т.к. FLibrary изменит его структуру под себя.</p>
<p>Опции создания коллекции:
<br>7. Добавлять неиндексированные книги, по умолчанию включено. В коллекцию будут добавлены найденные в архивах книги, о которых нет записей в индексе архива. Т.е. в архиве есть, в индексном файле - нет.
<br>8. Добавлять отсутствующие в архивах книги, по умолчанию выключено. В коллекцию будут добавлены все имеющиеся в индексе книги, даже те, файлов которых нет в архиве. Т.е. симметрично предыдущему, в индексе есть, в архиве может и не быть.
<br>9. Сканировать неиндексированные архивы, по умолчанию выключено. FLibrary просканирует все архивы в указанной папке, в том числе неупомянутые в индексном файле. Т.е. можно подложить в папку с архивами левые архивы с книгами в формате fb2, и они будут добавлены в коллекцию. Разумеется, такое сканирование займёт больше времени, чем простой разбор *.inpx.
<br>12. Помечать неиндексированные книги как удаленные, по умолчанию включено. Неиндексированные файлы находятся в архиве по историческим причинам и обычно имеют индексированные копии.
<br>14. Тип архива. При включенной галке 8 для проиндексированой книги в папке 3 может не оказаться архива. Тогда будет записан архив с именем из индекса и указанным расширением. Такое может понадобиться при поиске нужной книги без скачивания всей раздачи.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Как обновить коллекцию?</summary>
<p>Докачиваем обновление раздачи как обычно, при следующем запуске FLibrary обнаружит изменение индексного файла *.inpx и предложит обновить коллекцию. Соглашаетесь, и через несколько секунд всё готово. Тем не менее, время от времени имеет смысл пересоздавать коллекцию "с нуля", т.к. автоматическое обновление подтягивает только отсутствующие ранее данные. В то время как уже имеющиеся описания могут содержать полезные исправления. Иногда полезно пересоздать коллекцию при обновлении версии FLibrary, особенно если это рекомендуется на странице What's Changed. При пересоздании коллекции не забывайте сохранять пользовательские данные.</p>
<p>Для http-сервера FLibrary есть скрытая настройка <a href="#offlink1">(см. ниже)</a>, побуждающая его молча обновлять коллекцию при изменении *.inpx.</p>
<hr>
</details>

<details>
    <summary>&#128211; Как найти книгу по названию, автору, серии?</summary>
<p>По автору и серии лучше искать в соответствующих разделах навигации, где можно не только искать по списку, но и фильтровать его.
<br>Но доступен и поиск книг по их названию, автору или серии.</p>
<p class="img"><img src="img/search/0_1100.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p>Допустим, надо найти книгу "Гарри Поттер и методы рационального мышления". В программе реализован полнотекстовый поиск по заголовкам книг, поэтому не обязательно вводить всё название. Достаточно ввести пару-тройку слов, даже не целиком, и даже не в исходном порядке.</p>
<p class="img"><img src="img/search/1_1100.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p>Жмём Enter (или иконку лупы слева), и программа переходит в раздел навигации "Поиск", в окне книг показывает результаты поиска</p>
<p class="img"><img src="img/search/2_1100.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p>На этом можно было бы и закончить, но добавлю:</p>
<ul>
<li>Поисковые запросы запоминаются в разделе "Поиск", здесь их можно выбрать повторно</li>
<li>Добавить поисковый запрос можно в этом же разделе, кнопкой с плюсиком</li>
<li>Ненужный запрос можно удалить кнопкой с крестиком</li>
</ul>
<details>
    <summary class="subtitle"> Накопились поисковые запросы. Как их удалить? По одному неудобно</summary>
<ol class="top10">
<li>Выделить все (Ctrl+A) или только ненужные запросы (мышь + Ctrl или Shift)</li>
<li>Нажать кнопку удаления на одном из выделенных</li>
<li>Подтвердить удаление в появившемся диалоге</li>
</ol>
<p class="subtitle">То же для списка групп.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Можно ли сортировать книги по нескольким колонкам?</summary>
<p>Можно. Удерживайте Shift, кликая по заголовкам колонок.</p>
<hr>
</details>

<details>
    <summary>&#128211; Хочу видеть книги только на одном языке. Или на двух. Можно убрать остальные?</summary>
<p>Можно. Через меню Настройки/Фильтры, вызываем диалог настройки фильтров</p>
<p class="img"><img src="img/filter/0_500.jpg" alt="&#128558; Йок картинка, бро!" class="img500"></p>
<p>Переходим на вкладку "Языки", помечаем галками в колонке "Книги отфильтрованы" те языки, книги на которых не хотим видеть. Взводим галку "Фильтр включен", жмём "Применить".</p>
<p class="img"><img src="img/filter/1_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>Всё, книги на неугодных языках спрятаны. Галками в колонке "Скрыто" можно скрывать языки из навигации (левой панели главного окна).
<br>Аналогичным образом можно убрать ненужных авторов, серии, жанры и ключевые слова.</p>
<p><b>(⊙_⊙) Внимание!</b> Галки независимы - убрав из навигации какой-то элемент, вы продолжите видеть связанные с этим элементом книги из других элементов/разделов навигации. И наоборот, отфильтровав книги по какому-то элементу навигации вы продолжите видеть этот элемент навигации в его разделе, а выбрав его, увидите и отфильтрованные книги (если они не были отфильтрованы по другому элементу).</p>
<p>В диалоге работает поиск/фильтр, а у заголовков колонок с галками есть контекстное меню.</p>
<p class="img"><img src="img/filter/2_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p>"Быстрый фильтр" по языку по прежнему доступен из контекстного меню заголовка колонки языка таблицы книг</p>
<p class="img"><img src="img/filter/3_1000.jpg" alt="&#128558; Йок картинка, бро!" class="img1000"></p>
<hr>
</details>

<details>
    <summary>&#128211; Можно ли физически удалить ненужные мне книги из архивов?</summary>
<p>Можно. В программу встроена возможность физической чистки коллекции, с удалением файлов из архива и записей из базы данных. Функция удаления файлов из архива изначально заблокирована, чтобы её разблокировать, нужно в главном меню "Коллекция" выбрать пункт "Разрешить деструктивные операции". После подтверждения намерения продолжать и согласия с опасностью безвозвратной утраты книг в контекстном меню книг активируется пункт "Удалить навсегда". Он же сделает активной галку 7 "Удалить навсегда", вместе с файлами книг из архива, <a href="#offlink3">см. ниже</a>.</p>
<p class="img"><img src="img/cleanup/0_400.jpg" alt="&#128558; Йок картинка, бро!" class="img400"></p>
<p>Выбор пункта меню "Очистка..." вызовет окно критериев очистки коллекции.</p>
<p class="img"><img src="img/cleanup/1_1100.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p>FLibrary поддерживает следующие критерии:
<br>1. "Удалённые" книги. При выборе этого критерия из коллекции будут удалены книги, помеченные в базе данных как удалённые.
<br>2. Дубликаты книг. Программа считает дубликатом одноимённые книги, имеющие хотя бы одного общего автора. При выборе этого критерия такие книги удалятся, кроме одной, добавленной в коллекцию последней. Таким образом, дублями среди прочих окажутся разные издания или разные переводы одной книги. Будьте осторожны.
<br>3. Жанры. Можно отметить нежелательные жанры. У этого критерия есть дополнительная настройка, реализованная радиокнопками:</p>
<ul>
<li>Полное совпадение. При выборе будут удалены те книги, все жанры которых входят в множество выбранных к удалению.</li>
<li>Частичное совпадение. Будут удалены те книги, у которых хотя бы один жанр выбран к удалению. Очень опасная опция.</li>
</ul>
<p class="null">4. Языки. Можно отметить нежелательные языки. Следует понимать, что реальный язык текста многих книг не совпадает с указанным как в описании, так и в метаданных fb2.
<br>5. По размеру. При выборе этого критерия будут удалены книги, размер файла которых меньше минимального или больше максимального пределов.
<br>6. По рейтингу. Если библиотечный рейтинг книги ниже указанного и/или рейтинга нет, т.е. книгу пока никто не оценил.
<br>9. Сборники.</p>
<p>После аккуратной расстановки галок нажимаем кнопку 8 "Анализ коллекции", непродолжительное время ждём анализа коллекции на соответствие указанным критериям, после чего видим сообщение с результатом</p>
<p class="img"><img src="img/cleanup/2_500.jpg" alt="&#128558; Йок картинка, бро!" class="img500"></p>
<p>Это последний шанс передумать и нажать "Нет". Но если нажать "Да", программа начнёт удаление книг.</p>
<p id="offlink3"><b>(⊙_⊙) ВНИМАНИЕ!</b> Если взведена галка 7, то файлы книг будут физически удалены из архивов, а их записи - из базы данных. Для этого может потребоваться продолжительное время, в зависимости от количества удаляемых книг, мощности компьютера, производительности диска, на котором располагается коллекция, и т.п. Но не очень долго. Если галка 7 не взведена, то книги будут просто скрыты в интерфейсе FLibrary.</p>
<p>По окончанию чистки коллекции имеет смысл деактивировать деструктивные операции.</p>
<hr>
</details>

<details>
    <summary>&#128211; Как сконвертировать книгу из fb2 в нужный мне формат?</summary>
<details>
    <summary class="subtitle"> Лень столько читать, можно быстрее?</summary>
<p class="subtitle">Можно. Накатить этот ключ реестра, подправив пути:</p>
<p class="code">Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\a1e61de4-da10-4015-a7c3-91453cd0e215]
"Name"="Конвертация в epub"
"Number"=dword:00000001
"Type"="ExportToDevice"

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\a1e61de4-da10-4015-a7c3-91453cd0e215\37fe0cd3-35ee-4521-85a9-5b3f00138585]
"Command"="D:\\programs\\MyHomeLib\\converters\\FB2ePub\\Fb2ePub.exe"
"Arguments"="\"%source_file%\" \"D:/books/%author%/[%series%/[%seq_number%-]]%title%.epub\""
"Number"=dword:00000002
"Type"="LaunchApp"

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\a1e61de4-da10-4015-a7c3-91453cd0e215\3b791fea-5942-479d-b7e2-6c3c3f6862cd]
"Command"="mkdir"
"Arguments"="\"D:/books/%author%/[%series%]\""
"Number"=dword:00000001
"Type"="System"
</p>
<hr class="lite">
</details>
<p>В составе FLibrary нет встроенных конвертеров, но есть возможность прикрутить любой внешний, если он имеет интерфейс командной строки. Например, можно позаимствовать нужный конвертер из состава MyHomeLib. Для вызова из FLibrary внешнего конвертера нужно настроить скрипты, по одному на каждый желаемый формат.</p>
<p>1. В главном меню выбираем Настройки/Скрипты...</p>
<p class="img"><img src="img/convert/0_500.jpg" alt="&#128558; Йок картинка, бро!" class="img500"></p>
<p>2. В появившемся окне нажимаем "Добавить скрипт"</p>
<p class="img"><img src="img/convert/1_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>3. В верхней части окна ("Скрипты") появится строка, в неё вбиваем желаемое имя скрипта.</p>
<p class="img"><img src="img/convert/2_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>Теперь нужно добавить команды скрипта. Какие именно - зависит от выбранного внешнего конвертера. Типичный набор состоит из двух команд: 
<br>1. создать папку 
<br>2. вызвать конвертер. 
<br>Итак, добавляем команды.</p>
<p>4. Жмём "Добавить команду"</p>
<p class="img"><img src="img/convert/3_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>5. В нижней части окна «Настройки команды» отобразятся 4 строки, в первой строке «Тип» (1) из выпадающего меню выбираем «Системная команда»</p>
<p class="img"><img src="img/convert/4_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>6. Во второй строке «Команда» (2) записываем <b>mkdir</b> , т.е. создать папку.</p>
<p>7. В третьей строке «Аргументы» (3) вводим нужный путь. <b>(⊙_⊙) ВНИМАНИЕ!</b> Слеши должны быть в стиле Windows, т.е. такие - \ . Каждый аргумент желательно заключать в кавычки. Пример:</p>
<p class="code">"d:\books\epub"</p>
<p>Сохраняем результат - "ОК"</p>
<p class="img"><img src="img/convert/5_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>7. Добавляем команду для запуска конвертера: нажимаем «Добавить команду»</p>
<p class="img"><img src="img/convert/6_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p>8. В первой строке «Тип» (1) из выпадающего меню выбираем «Запуск консольного приложения»,
<br>после чего нажимаем на иконку выбора программы во второй строке «Команда» (2)</p>
<p class="img"><img src="img/convert/7_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<p class="note">* Назначение четвертой строки «Рабочая папка» (4) — см. ниже <a href="#offlink4">«Детали, нюансы»</a></p>
<p>9. В появившемся диалоге выбора файла указываем желаемый внешний конвертер:</p>
<p class="img"><img src="img/convert/8_900.jpg" alt="&#128558; Йок картинка, бро!" class="img900"></p>
<p>10. Добавляем параметры запуска конвертера в строке «Аргументы» (3). Этому конвертеру нужны пути к файлам, исходному и сконвертированному. Вводим</p>
<p class="code">"%source_file%" "d:\books\epub\book.epub"</p>
<p>Сохраняем результат - "ОК"</p>
<p class="img"><img src="img/convert/9_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p>11. Сохраняем скрипт</p>
<p class="img"><img src="img/convert/10_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p>Всё, скрипт готов. Теперь в контекстном меню книг, в подменю экспорт есть пункт "Конвертация в epub", т.е. название скрипта из п.3</p>
<p class="img"><img src="img/convert/11_900.jpg" alt="&#128558; Йок картинка, бро!" class="img900"></p>
<p>Если его выбрать, в папке d:\books\epub появится файл book.epub .</p>
<p>Вероятно, мало кто захочет конвертировать книги каждый раз в один и тот же файл, т.к. хочется, чтобы файлы сохранялись в папки по именам авторов, именовались заголовками книг. Для этого в командах скрипта при указании папок следует использовать макросы. Например, чтобы путь к книге содержал её автора и серию (если есть), а имя файла - номер в серии (если есть) и заголовок книги, в «Аргументы» (3) следует указать такую строку:</p>
<p class="code">"d:\books\epub\%author%\[%series%\[%seq_number%-]]%title%.epub"</p>
<p>Полный список имеющихся макросов доступен из контекстного меню редактирования Аргументов</p>
<p class="img"><img src="img/convert/12_1200.jpg" alt="&#128558; Йок картинка, бро!" class="img1200"></p>
<details>
    <summary class="subtitle"> Детали, нюансы</summary>
<ol class="top10">
<li>Следует учитывать специфику некоторых конвертеров — они не могут создавать папки, поэтому перед их запуском необходимо создавать папку через системную команду «mkdir», причем учитывая полный конечный путь (используя макросы). Тогда при добавлении первой и второй команды, строки «Аргументы» будут выглядеть так:
<p class="code">
"d:\books\%author%\[%series%]"

"%source_file%" "d:\books\%author%\[%series%\[%seq_number%-]]%title%.mobi"</p>
</li>
<li>Также следует учитывать, что при конвертации книг с одинаковым названием (скажем, когда вы решили загрузить два разных перевода одной книги), конвертер будет перезаписывать следующий файл поверх предыдущего, то есть в папке будет только одна книга. Чтобы этого избежать, следует добавлять макросы дополнительной идентификации. Например:
<p class="code">
"%source_file%" "d:\books\epub\%author%\[%series%\[%seq_number%-]]%title%_%db_id%.epub"</p>
</li>
<li>Некоторые конвекторы в работе требуют дополнительных команд - ключей запуска, а также и использования сторонних файлов настроек. Скрипт FLibrary позволяет прописывать дополнительные команды и/или указывать рабочую папку для дополнительных файлов программы <a href="#offlink4">(swd)*</a>. 
<br>В частности, конвертер fb2 в lrf (fb2lrf.exe - для преобразования в формат древнего соневского ридера Sony PRS-350 (650, 600...)) требует ключи для входного и выходного файла, а также присоединение дефолтного файла со стилями. Поэтому строка «Аргументы» для этого конвертера будет иметь следующий вид:
<p class="code">
"-i "%source_file%" -o "d:\books\%author%\[%series%\[%seq_number%-]]%title%_%db_id%.lrf" -s "c:\Program Files\FLibrary\converters\fb2lrf\default_styles.sini"</p>
<br>или
<br>
<br>В строку «Аргументы» записываем входной и выходной файл с ключами:
<p id="offlink4" class="code">
"-i "%source_file%" -o "d:\books\%author%\[%series%\[%seq_number%-]]%title%_%db_id%.lrf"</p>
<br>а в строке «Рабочая папка» выбираем папку дефолтного файла со стилями.
<p class="img"><img src="img/convert/13_1200.jpg" alt="&#128558; Йок картинка, бро!" class="img1100"></p>
<p class="note">* CWD (Current Workind Directory) - это папка, из которой программа запущена, которая является корнем для относительных путей открываемых ею файлов. Для примера показана работа с конвертером fb2lrf_c.exe, которому требуется файл с конфигом. Если его запустить вручную из его собственной папки или, что то же самое, запустить програмно (из FLibrary), указав его собственную папку в качестве CWD, то файл с конфигом можно указать как -s default_styles.sini. А можно совсем не указывать, т.к. по умолчанию он пытается использовать именно этот файл, и в этом случае ему удастся.
<br>----------------------------------</p>
</li>
<li>Если каждый раз вы конвертируете файлы в другое место - в строках «Аргументы» следует прописывать относительные пути (в этом случае программа будет каждый раз запрашивать путь к папке назначения):
<p class="code">"%user_destination_folder%\%author%\[%series%]"

"%source_file%" "%user_destination_folder%\%author%\[%series%\[%seq_number%-]]%title%_%db_id%.epub"
</p>
</li>
</ol>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Выбрал раздел навигации 'Все книги', как теперь выйти из него?</summary>
<p>Перейти по любой ссылке из аннотации к любой книге.</p>
<p class="img"><img src="img/all_books/0_1000.jpg" alt="&#128558; Йок картинка, бро!" class="img1000"></p>
<hr>
</details>

<details>
    <summary>&#128211; Как узнать, есть ли в раздаче нужная мне книга?</summary>
<p id="offlink5">Есть несколько вариантов:</p>
<details>
    <summary class="subtitle">с каталогизатором (рекомендуется)</summary>
<ol>
<li>Скачиваем индексный файл *.inpx и один из инсталляторов FLibrary, на свой вкус</li>
<li>Устанавливаем FLibrary</li>
<li>Создаём коллекцию по индексному файлу с опцией "Добавлять отсутствующие в архивах книги"</li>
<li>Ищем в программе нужную книгу</li>
</ol>
</details>
<details>
    <summary class="subtitle">с файлом содержания</summary>
<p class="subtitle">Скачиваем файл contents.7z. В архиве текстовые файлы в формате csv, по файлу на язык. Каждая строчка файла описывает одну книгу. Формат: авторы, название, серия (номер в серии), архив, файл. Разделитель - табуляция.
<br>Этот способ имеет смысл, если вас потом устроит книга без обложки и иллюстраций. Иначе всё равно придётся скачивать и устанавливать каталогизатор.</p>
</details>
<details>
    <summary class="subtitle">с индексным файлом</summary>
<p class="subtitle">Скачиваем индексный файл *.inpx. Он - обычный zip-архив, содержащий текстовые файлы *.inp, где каждая строка описывает одну книгу раздачи. Строка суть csv, разделитель - байт с кодом 04. Список полей: 
AUTHOR; GENRE; TITLE; SERIES; SERNO; FILE; SIZE; LIBID; DEL; EXT; DATE; LANG; LIBRATE; KEYWORDS; YEAR; SOURCELIB
<br>В файлах можно искать по тексту вашим любимым просмотрщиком текстов. Рекомендую встроенный в Far Manager.
<br>Этот способ имеет смысл, если вас потом устроит книга без обложки и иллюстраций. Иначе всё равно придётся скачивать и устанавливать каталогизатор.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Как добыть нужную книгу без скачивания раздачи целиком?</summary>
<ol class="top10"> 
<li>Узнаём, есть ли в раздаче нужная вам книга, <a href="#offlink5">см.</a> инструкцию выше</li>
<li>Узнаём имя архива, в котором находится книга</li>
<li>Скачиваем этот архив, подкладываем под FLibrary</li>
<li>Извлекаем файл книги
<br>...
<br>PROFIT!!!! Теперь книгу можно экспортировать из FLibrary.</li>
</ol>
<details>
    <summary class="subtitle"> Можно даже не скачивать архив</summary>
<p class="subtitle">, а вместо этого настроить скрипт скачивания нужной книги непосредственно с сайта Флибусты. Дополнительно понадобится какое-нибудь консольное приложение для скачивания файлов из интернета (например curl), его надо скачать и установить. Если у вас обычная версия FLibrary, установленная инсталлятором, то для настройки скрипта можно вкатить</p>
<details>
    <summary class="sub_subtitle">вот такой ключ реестра=></summary>
<p class="code">Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\933c6488-b061-44d6-82fa-6257a6144f0f]
"Name"="Скачать с Флибусты"
"Number"=dword:00000001
"Type"="ExportToDevice"

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\933c6488-b061-44d6-82fa-6257a6144f0f\b2206572-8ef6-4a69-8f97-71bcb151505d]
"Command"="mkdir"
"Arguments"="\"c:/books/%author%/[%series%]\""
"Number"=dword:00000001
"Type"="System"

[HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary\Scripts\933c6488-b061-44d6-82fa-6257a6144f0f\d27e10fd-3816-41b1-af5b-a9a17043ad12]
"Command"="D:\\programs\\curl\\bin\\curl.exe"
"Arguments"="-o \"c:/books/%author%/[%series%/[%seq_number%-]]%title%.zip\" -L \"http://x.flibusta.is/b/%lib_id%/download\""
"Number"=dword:00000002
"Type"="LaunchApp"
</p>
</details>
<p class="subtitle"><b>(⊙_⊙) ВНИМАНИЕ!</b> Путь к curl в скрипте должен совпадать с тем, куда вы его установили. Если качаете не curl'ом, а другой программой, то надо изменить параметры командной строки в соответствии с её синтаксисом. Также по вкусу поправьте путь, куда будут скачиваться книги. В предложенном файле реестра это c:/books.
Если вы предпочитаете портабельную версию FLibrary, то вы, скорее всего, продвинутый пользователь, и легко настроите всё сами. Но если вдруг столкнётесь с затруднениями - спрашивайте, буду рад помочь.</p>
<p class="subtitle"><b>(⊙_⊙) ВНИМАНИЕ!</b> Сработает только для книг с Флибусты. Вероятно, Либрусек тоже предоставляет такую возможность, но ссылка будет другая. Если знаете какая - сообщите мне, добавим сюда.</p>
</details>
<details>
    <summary class="subtitle">Можно даже обойтись вез внешних средств</summary>
<p class="subtitle">, но скрипт настраивать всё равно придётся. Зато теперь без curl'а, и достаточно одной встроенной во FLibrary команды:</p>
<ol>
<li>Добавляем скрипт</li>
<li>Как-нибудь называем его, например "Скачать с Флибусты"</li>
<li>Добавляем команду</li>
<li>Выбираем из выпадахи тип "Встроенная команда"</li>
<li>Выбираем команду "Скачать"</li>
<li>Задаём параметры команды (куда класть, откуда качать). Для скачивания с Флибусты в папку t:/ftp указываем
<p class="code">
-o "t:/ftp/%author%/[%series%/[%seq_number%-]]%title%.zip" "http://x.flibusta.is/b/%lib_id%/download"
</p>
<br>В вашем случае указываете какой-нибудь валидный путь, типа C:\books. Или на ваш вкус, лишь бы диск был в системе и были права на запись. Можно также поменять шаблон пути, в контекстном меню строки ввода аргументов доступно контекстное меню с доступными макросами.</li>
<li>Сохраняем получившееся</li>
</ol>
<p class="subtitle">После этих несложных телодвижений в контекстном меню книг появится пункт меню "Скачать с Флибусты", по выбору которого книга будет скачана.
<br>Если ваши брэндмауэр и оператор интернета не против, конечно.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; У меня дома 5 компов и 3 ноута. Мне надо скачивать раздачу и ставить FLibrary на все эти устройства?</summary>
<p>Не обязательно. FLibrary предоставляет некоторые сетевые возможности в виде нескольких http-сервисов. Для доступа к ним необходимо запустить имеющийся в составе FLibrary http-сервер. Выбираем пункт меню</p>
<p class="img"><img src="img/http/0_900.jpg" alt="&#128558; Йок картинка, бро!" class="img900"></p>
<p>В открывшемся диалоге => Жмём Пуск и всё, сервер запущен, можно посмотреть на его работу. Для этого можно ткнуть в ставшие кликабельными надписи.</p>
<p class="img"><img src="img/http/1_600.jpg" alt="&#128558; Йок картинка, бро!" class="img600"></p>
<ol class="top10">
<li><b>Веб-интерфейс ReactApp.</b> В браузере откроется сайт, разработанный уважаемым alloroc2. Тут можно искать книги по названию/автору/серии, скачивать их и даже читать прямо там, на сайте. Очень удобно. Интерфейс сайта вполне интуитивен, функциональность постоянно расширяется.
<details>
    <summary class="sub_subtitle"> Описание от alloroc2=></summary>
<p class="sub_subtitle">Работать через веб можно в браузере с любого устройства.
<br>Поиск при вводе текста сразу с разбивкой результатов по названиям, авторам и сериям.
<br>Просмотр групп книг, заранее отобранных в программе.
<br>Для выбранной книги статистика + обложка, оглавление с указанием глав и их положения в книге.
<br>Выбранную книгу можно читать не выходя из веб интерфейса каталогизатора.
<br>Для удобства чтения переключение в полный экран, а так же прокрутка текста.
<br>Управление шрифтом и скорость прокрутки горячими клавишами.
<br>Прогресс чтения запоминается в браузере.
<br>Открыл вебку, нашел книгу и выпал из реальности.</p>
</details>
</li>
<li><b>Упрощённый веб-интерфейс.</b> Откроется страничка в браузере, отражающая мои познания в html. Там тоже поиск, навигация по коллекции, скачивание и чтение. Но совершенно без какого либо дизайна, предельный минимализм. Очень на любителя, но мне хватает.</li>
<li><b>OPDS</b> Откроется страничка в браузере с каким-то JSON'ом. Собственно, по этому адресу надо ходить не браузером, а читалкой с поддержкой протокола OPDS.</li>
</ol>
<p>При запущенном http-сервере эти адреса доступны с любого устройства, находящегося в одной локальной сети, т.е. на другом компьютере/смартфоне/планшете можно зайти на два варианта веб-интерфейса, а также подключиться читалкой к каталогу OPDS.</p>
<details>
    <summary class="subtitle"> Это только дома будет работать? А через интернет нельзя?</summary>
<p class="subtitle">Можно, но пробрасывать указанные порты во внешний мир придётся самостоятельно. Я в этом не разбираюсь настолько, что даже не уверен в осмысленности предыдущего предложения. Гуглить "белый IP" и "туннели CloudFlare.com". Буду благодарен всяким умным словам в личку про это вот всё.</p>
<details>
    <summary class="sub_subtitle"> умные говорят=></summary>
<p class="sub_subtitle">
(⊙_⊙) <br> доступ извне я прокинул через nginx - просто добавил поддомен book.ххх.хх, получил для него сертификат и теперь можно ходить по https, а nginx уже перенаправляет во внутренней сети на http.
<br>(c) SoloMen
<hr class="lite">
<p class="sub_subtitle">(⊙_⊙) <br>Смог с помощью Tilescale. Что я собсна сделал чтобы пользоваться:</p>
<ol>
<li>Скачал сам TileScale (где то на просторах интернета говорят есть его опенсрусь аналог) на тапок и комп;</li>
<li>Включил их (тапок и комп) в общую сеть с помощью Tilescale;</li>
<li>Включил в FLibrary по ЧаВо сервер и включил именно адрес который стоит в Tilescale, в моем случае это оказался прикрепленный адрес 100.84.44.127 (те кто будут тоже такой способ пробовать, может оказаться другой адрес, смотрите на сайте в панели управления или в диспетчере задач тыкнув в графу с Tilescale, в графе IPv4-адрес под графиком будет собсна сам адрес который и прикрепляем), для себя конкретно оставил включенным opds режим, его же адрес и вбил в строку для AlReader'а;</li>
<li>Собсна профит;
<br> (c) AncientSUS</li>
</ol>
<p class="subtitle">UPD В настройке адреса http-сервера можно указать "Любой", тогда сервисы будут доступны через все имеющиеся интерфейсы: localhost, 127.0.0.1, локальный IP-адрес, и т.д.</p>
</details>
</details>
<hr>
</details>

<details>
    <summary>&#128211; Что за бардак в раздаче с авторами и сериями?</summary>
<p>Это последствия слияния Флибусты и Либрусека в рамках одной раздачи. Действительно, несогласованность именования авторов и серий на Флибусте и Либрусеке - серьёзная проблема. Плюс разные подходы библиотек к разрешению коллизий полных тёзок. Из-за этого некоторые имена здесь могут как "раздвоится", так и "схлопнуться", в результате чего книги одного автора в раздаче могут быть "привязаны" к разным, так и наоборот, книги разных авторов приписаны одному. То же с сериями.</p>
<details>
   <summary class="subtitle"> И что, совсем ничего нельзя сделать?</summary>
<p class="subtitle">Увы, провести согласование на уровне сетевых библиотек-источников книг для этой раздачи вряд ли удастся. Нам остаётся только вносить точечные правки. Если вы заметили, что какой либо автор или серия "раздвоились" или "схлопнулись" - сообщите об этом мне. Я внесу локальную правку, и следующее месячное обновление исправит ситуацию.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; А это ничего, что мой антивирус ругается на раздачу?</summary>
<p>Ничего. В настоящее время известно о нескольких причинах срабатывания антивирусов на эту раздачу.</p>
<p class="subtitle"> 1. Инсталлятор FLibrary_setup.exe.
<br>Файл генерируется одним из самых популярных средств создания инсталляторов Inno Setup. Можно предположить, что этим же инструментом пользуются и вирусописатели, поэтому сигнатуры Inno Setup регулярно попадают в антивирусные базы. Что с этим делать? Солидные софтверные конторы в аналогичных случаях связываются с вендорами, те подкручивают свои базы, и антивирусы перестают ложнореагировать. Увы, я не солидная контора, в случае с FLibrary остаётся лишь довериться моему честному слову и забить на антивирус. Я так и делаю. Ещё можно использовать msi-инсталлятор или архив с "портабельной" версией, на них вирустотал ни разу не ругался.
<br>Или тщательно изучить исходные коды на предмет вредоносности и собирать проект самостоятельно.</p>
<p class="subtitle">2. В библиотеке есть книга Олега Михайловича Бойцова "Защити свой компьютер на 100% от вирусов и хакеров", файл 166093.fb2 в архиве fb2-166043-168102.7z.
<br>Похоже, некоторым антивирусам не нравятся примеры содержащегося там вредоносного кода. По-моему, это явный перебор и паранойя. Если ваша читалка не пытается интерпретировать и запускать скрипты со страниц книг - беспокоиться не о чем, можно смело добавлять *.fb2 в исключения антивируса.</p>
<p class="subtitle">3. Есть также книга Чадова Тимофея "Использование ListView в режиме виртуального списка", файл 170704.fb2 в архиве fb2-168103-172702.7z. В неё автор вложил исполняемый exe-файл, на который ругался как минимум один вендор с virustotal. Но насколько мне известно, антивирусы пока не пытаются парсить fb2 с целью декодировать бинарные вложения из base64, распаковать полученный архив, проанализировать его содержимое. Если ваша читалка не пытается исследовать бинарные вложения книг, на которые нет ссылок с её страниц, с целью запуска внезапно найденных там программ, то беспокоиться опять не о чем.</p>
<hr>
</details>

<details>
    <summary>&#128211;Нашёл косяк в программе, что делать?</summary>
<ol class="top10">
<li>Убедиться, что косяк имеет место в последнем релизе FLibrary. Особенно это касается опечаток, уйма которых была найдена и исправлена во время написания этих инструкций.</li>
<li>Запостить багрепорт <a href="https://github.com/heimdallr/books/issues" target="_blank">тут></a>, по возможности описав косяк, приложив скриншот, etc</li>
</ol>
<p>Если нет учётки на гитхабе, а регаться лень, то можно написать мне в личку. Или оставить сообщение в топике. Буду благодарен за любую обратную связь. Но тому, кто запостит на гитхаб багрепорт (или фичереквест, который будет взят в работу), будет предоставлена персональная дорелизная сборка FLibrary. С упоминанием в About.</p>
<hr>
</details>

<details>
    <summary>&#128211; Обещают быструю работу FLibrary, а по факту тормоза. Наврали?</summary>
<p>Как минимум у одного пользователя наблюдались помехи в работе программы со стороны Microsoft Defender'а, что проявлялось в замедлении работы и повышенном потреблении оперативной памяти. Настройка Defender'а помогла.</p>
<p>Попробуйте внести в исключения антивируса</p>
<ul>
<li>Папку с программой</li>
<li>Папку с базой данных коллекции</li>
<li>Папку с архивами книг</li>
<li>Папку с временными файлами (%TEMP%)</li>
</ul>
<hr>
</details>

<details>
    <summary>&#128211; В меню есть какие-то 'развлечения'. Взвёл все галки, что дальше?</summary>
<p>Развлекательный контент показывается взамен пустой аннотации, когда в окне книг не выбрано ни одной книги.</p>
<details>
    <summary class="subtitle">Например</summary>
<p class="img"><img src="img/entertainment/0_800.jpg" alt="&#128558; Йок картинка, бро!" class="img800"></p>
<p class="img"><img src="img/entertainment/1_800.jpg" alt="&#128558; Йок картинка, бро!" class="img800"></p>
<p class="img"><img src="img/entertainment/2_800.jpg" alt="&#128558; Йок картинка, бро!" class="img800"></p>
</details>
<details>
    <summary class="subtitle">Вижу пустую аннотацию, где шутки?</summary>
<p class="subtitle">Чтобы это работало, нужен доступ а) к интернету, б) к сервисам, предоставляющим контент. Следует учитывать, что какие-то сервисы могут перестать работать. А к некоторым нет доступа из вашей локации без впн.
<br>В целях диагностики проблемы можно скрытой настройкой включить показ ошибок получения развлекательного контента.</p>
</details>
<details>
    <summary class="subtitle">Почему всё на английском?</summary>
<p class="subtitle">Если найдёте (или поднимите свой) подобный публичный (без регистрации и смс) сервис на другом языке - дайте мне знать, прикручу.
</details>
<hr>
</details>

<details>
    <summary>&#128211; Зачем в раздаче столько инсталляторов FLibrary?</summary>
<p class="subtitle" style="text-align:center"><i>
Three Rings for the Elven-kings under the sky
<br>Seven for the Dwarf-lords in their halls of stone
<br>Nine for Mortal Men doomed to die
</i></p>
<p><b>I FLibrary_setup_x.y.z.exe</b>
<br>Генерируется InnoSetup. Основной инсталлятор, наиболее удобный и функциональный. Позволяет</p>
<ul>
<li>Выбрать язык инсталлятора</li>
<li>Выбрать режим установки только для меня/для всех</li>
<li>Запустить прогу сразу после установки</li>
</ul>
<p>Есть ньюанс: его не любят некоторые антивирусы. Кому верить, антивирусу или нам с Jordan Russell и Martijn Laan - решайте сами..</p>
<p><b>II FLibrary_setup_x.y.z.msi</b>
<br>Microsoft Windows Installer. Скорее всего, я просто не умею его готовить, но</p>
<ul>
<li>Язык инсталлятора один и для универсальности английский</li>
<li>Программа устанавливается только для всех, в `C:\Program Files`</li>
<li>После завершения работы инсталлятора автоматически ничего не запускается</li>
</ul>
<p>Буду рад, если меня научат, как сделать msi гладким и шелковистым.</p>
<p><b>III FLibrary_portable_x.y.z.7z</b>
<br>Это вообще не инсталлятор, а просто архив с бинарями. Распаковывать и настраивать ярлыки запуска придётся самостоятельно, ручками. Установленная таким образом программа свои настройки хранит не в реестре, а в лежащем рядом ini-файле, типа portable. Следовательно, распаковывать надо туда, где есть доступ на запись.</p>
<p><b>Ну и какой ставить-то?</b>
<br>Содержимое всех инсталляторов практически идентично, можно ставить любой, на свой вкус и опыт. Но рекомендую первый вариант, поскольку сам использую именно его. Остальные два не тестируются почти никогда.</p>
<hr>
</details>

<details>
    <summary>&#128211; А где программа хранит ...?</summary>
<details>
    <summary class="subtitle">настройки</summary>
<p id="offlink2">Обычная версия (установленная инсталлятором) - ветка реестра HKEY_CURRENT_USER\SOFTWARE\HomeCompa\Flibrary</p>
<p>Портабельная версия (из архива) - файл FLibrary.ini в папке программы</p>
</details>
<details>
    <summary class="subtitle">журнал работы (логи)</summary>
<p>Файл %TEMP%\HomeCompa.FLibrary.log
<br>Последние записи лога можно увидеть прямо в программе, нажав Esc. Или через меню Настройки/Вид/Журнал/Показать.</p>
</details>
<hr>
</details>

<details>
    <summary>&#128211; А можно полный список скрытых настроек FLibrary?</summary>
<p id="offlink1">Мало кому нужные вещи, поэтому их нет в интерфейсе, дабы не загромождать.</p>
<p class="subtitle"><b>(⊙_⊙) ВНИМАНИЕ!!! Настройки эти следует добавлять по мере необходимости, по умолчанию в хранилище настроек их нет. 
<br>Где искать настройки - см. </b> <a href="#offlink2">"А где программа хранит ...?".</a></p>
<ul class="top10">
<li>v2.0.0 `Preferences/LibRate/symbol`, число по умолчанию 11088 - ascii или utf-8 код символа звёздочки ⭐ для колонки рейтинга в библиотеке-источнике. Коды разных символов можно посмотреть <a href="https://www.w3schools.com/charsets" target="_blank">тут</a>. Можно использовать те, что имеют в Hex не более четырёх знаков.</li>
<li>v2.1.2 `Preferences/hideScrollBars`, строка (true | false) по умолчанию true - управляет видимостью скроллбаров. Если задать 'false'. скроллбары не будут прятаться.</li>
<li>v2.1.4 `Preferences/GenresSortMode`, строка (SortByCode | SortByName | SortByChildCount | SortByCodeDesc | SortByNameDesc | SortByChildCountDesc), по умолчанию SortByCode - режим сортировки жанров</li>
<li>v2.1.4 `Preferences/opds/BookEntryLimit`, число DWORD, по умолчанию 25 - лимит на количество книг, отдаваемое одним списком по http.</li>
<li>v2.2.0 Не настройка, но скрытая функциональность. Сочетание Alt+Shift+Q вызовет окно, в котором можно выполнять SQL-запросы к базе данных коллекции. Результаты выполнения запросов - в логах.</li>
<li>v2.2.1 `Preferences/opds/transliterate`, строка (true | false) по умолчанию false - транслитерация имени файла, скачанного по http.</li>
<li>v2.2.1 `Preferences/LibRate/precision`, число DWORD, по умолчанию -1 - заменяет звёздочки рейтинга книги в библиотеке на число с указанной этим параметром точностью. Для действительно среднего рейтинга по Флибусте потребуется файл reviews\additional.zip. При отсутствии этой настройки или при её значении -1 показываются звёздочки.</li>
<li>v2.2.1 `Preferences/LibRate/colors/2.0`, `ui/Books/LibRate/colors/3.0`, `ui/Books/LibRate/colors/4.5`и т.п. Число DWORD, соответствующее цвету в формате RRGGBB. Для градиентной раскраски цифер рейтинга из предыдущего пункта.</li>
<li>v2.2.2 `Preferences/AnnotationJokes/Visible`, строка (true | false) по умолчанию true - при установке в 'false' отключает функциональность развлекательного контента в пустой аннотации</li>
<li>v2.2.2 `Preferences/AnnotationJokes/%ApiName%Visible`, строка (true | false) по умолчанию true - при установке в 'false' отключает работу %ApiName%, прячет соответствующий пункт меню `Настройки/Вид/Аннотация/Развлечения/%ApiNameTitle%`. Имеет смысл отключить те API, которые недоступны в вашей местности. Или переставшие работать.</li>
<li>v2.3.0 `Preferences/opds/ReadUrlTemplate` Шаблон ссылки на читалку из Web. Например, если установить в `http://127.0.0.1:44080/#/reader?url=http://%HTTP_HOST%:%HTTP_PORT%/Images/fb2/%1` то можно читать книжки либерамой. Перед этим либераму надо <a  href="https://github.com/bookpauk/liberama" target="_blank">скачать</a>, настроить и запустить. Возможно, настройке когда-нибудь найдётся и другое применение.</li>
<li>v2.3.0 `Preferences/opds/SeparatedSearch`, строка (true | false) по умолчанию false - для OPDS и Web-интерфейса включает режим раздельного поиска по авторам, сериям, названиям книг, всё вместе.</li>
<li>v2.3.0 `Preferences/opds/AutoupdateCollection`, строка (true | false) по умолчанию false - при установке в `true` http-сервер (opds.exe) будет следить за inpx и, в случае его изменения, автоматически обновит коллекцию.</li>
<li>v2.4.1 `Preferences/StartFocusedControl`, строка (SearchBooksByNames | NavigationSearchAndFilter | BooksSearchAndFilter) по умолчанию SearchBooksByNames - поле ввода, активное на старте программы.</li>
<li>v2.4.1 `Preferences/Alphabets/LinkedControl`, строка (SearchBooksByNames | NavigationSearchAndFilter | BooksSearchAndFilter) - поле ввода, с которым работает панель алфавитов. По умолчанию - не указано, панель алфавитов работает с активным полем ввода, т.е. с тем, в котором сейчас находится курсор.</li>
<li>v2.4.1 `Preferences/CommonBooksTableColumnSettings`, строка (true | false) по умолчанию false - при установке в `true` настройка столбцов таблицы книг станет общей для всех режимов навигации.</li>
<li>v2.5.0 `Preferences/AnnotationReviewSortMode`, строка (Time | Reviewer | Text | TimeDesc | ReviewerDesc | TextDesc), по умолчанию Time - режимы сортировки отзывов читателей в аннотации.</li>
<li>v2.5.4 `Preferences/HideToTray`, строка (true | false) по умолчанию false - при установке в `true` программа по Alt+F4 и по нажатию на крестик в главном окне прячется в системный трей. Выход через главное меню и по горячей клавише закрывает программу.</li>
<li>v2.5.4 `Preferences/MultipleInstance`, строка (Enabled | Disabled | Dialog) - настраивает возможность запуска нескольких экземпляров FLibrary. Enabled - можно запустить несколько экземпляров, Disabled - нельзя, при запуске следующего экземпляра приложения будет показан уже имеющийся, Dialog - при запуске следующего экземпляра будет показан диалог. По умолчанию - Enabled. Но если установлен режим HideToTray (см. выше), то всегда Disabled, вне зависимости от установленного значения настройки.</li>
<li>v2.5.4 `Preferences/Export/TransliterationMode, строка (None | FileNameOnly | AllExceptUserPath | All) - настраивает транслитерацию имени экспортируемых файлов. По умолчанию - None, т.е. не транслитерировать. FileNameOnly - будет транслитерировано имя файла, AllExceptUserPath - транслитерировать путь экспорта кроме выбранной пользователем папки (%user_destination_folder%), All - транслитерировать весь путь экспорта.</li>
<li>v2.5.4 `Preferences/Interaction/Book/OnLink`, строка (Read | ExtractAsFb2 | ExtractAsZip) - настраивает поведение программы по клику на ссылку-заголовок книги в аннотации. По умолчанию - Read - открыть книгу в читалке. ExtractAsIs - извлечь книгу. ExtractAsZip - извлечь книгу и упаковать её в zip-архив.</li>
<li>v2.5.4 `Preferences/Interaction/Book/OnDoubleClick`, строка (Read | ExtractAsFb2 | ExtractAsZip) - настраивает поведение программы по двойному клику на строке в таблице книг, значения те же, что в предыдущей настройке.</li>
<li>v2.5.4 `Preferences/RelativePaths', строка  (true | false) по умолчанию false - при установке в `true` программа будет сохранять в настройках относительные пути (читалка, скрипты, ...)</li>
<li>v2.5.5 `Preferences/ReadMark/color' - цвет метки прочитанных книг - число DWORD, соответствующее цвету в формате AABBGGRR, где АА - это значение прозрачности, а BBGGRR - значения для каждого из цветов RGB (! Обратите внимание на последовательность цветов => B-G-R !). Также стоит учитывать, что AA - инвертировано, т.е. при значении прозрачности FF (непрозрачно 100%) - цвет станет полностью прозрачным и виден не будет. 
<br>Установка цвета не обязательна для применения, для выделения прочитанного можно вообще не указывать параметр 'color', а только параметр 'width', в таком случае цветом метки будет использован цвет текста (т.е. в светлой теме - черный, в темной - белый).
<br><b>(⊙_⊙)</b> Книга становится "прочитанной" при установке для неё пользовательского рейтинга. </li>
<li>v2.5.5 `Preferences/ReadMark/width', число DWORD, по умолчанию `0` - ширина метки прочитанных книг. 
<br>Значение '0' отключает пометку. 
<br>В связи с разностью интерфейсов "Список" и "Дерево", рекомендуется использовать значения чисел от 1 до 9. При использовании двузначных чисел, будьте готовы к тому, что метка, которая хорошо выглядит в "Списке", в "деревянном" отображении будет выглядеть "непрезентабельно" </li>
<li>v2.5.5 `Preferences/opds/converter', раздел для управления конвертацией файлов, скачиваемых по http (opds, web-интерфейсы). Ключи:
<ul>
<li>Preferences/opds/converter/command, строка - путь к исполняемому файлу (утилите командной строки) конвертера</li>
<li>Preferences/opds/converter/arguments, строка - параметры конвертера, по умолчанию "%src%" "%dst%". Используются следующие подстановки (макросы): %src% - конвертируемый .fb2-файл книги, %dst% - файл-результат</li>
<li>Preferences/opds/converter/cwd, строка - рабочая директория для запускаемого конвертера, по умолчанию - папка с FLibrary.exe</li>
<li>Preferences/opds/converter/ext, строка - расширение файла после конвертации</li>
</ul>
<b>(⊙_⊙)</b> ВНИМАНИЕ! На web перестанет работать чтение. Если кому-то актуально - сообщите, пожалуйста.
</li>
<li>v2.5.5 `Preferences/AnnotationJokes/ShowErrors`, строка  (true | false) по умолчанию `false` - при установке в `true` в случае ошибки получения развлекательного контента будет показываться её текст.</li>
<li>v2.5.5 `Preferences/Books/Alignment', раздел для управления выравниванием полей в таблице книг. В этом разделе можно заводить ключи с именем поля и значением выравнивания.
<br>Возможные имена полей (ключей): Author, Title, Series, SeqNumber, Genre, Folder, FileName, Size, LibRate, UserRate, UpdateDate, Year, Lang
<br>Возможные значения выравнивания: AlignLeft, AlignRight, AlignCenter. Если интересно, можно поэкспериментировать с значениями <a href="https://doc.qt.io/qt-6/qt.html#AlignmentFlag-enum" target="_blank">отсюда</a>
</li>
<li>v2.5.5 `Preferences/UserRate/symbol`, число по умолчанию '11088' - ascii или utf-8 код символа звёздочки ⭐ для колонки пользовательского рейтинга.</li>
<li>v2.5.5 `Preferences/UserRate/noRateSymbol`, ascii или utf-8 код символа для книг с рейтингом "Без оценки".</li>
<li>v2.5.6 `Preferences/Books/ContextMenu/HashEnabled`, строка  (true | false) по умолчанию false - при установке в `true` добавляет в контекстное меню книг подменю "Хэш" с элементами "Вычисление" и "Сравнение". Для интересующихся детектором дублей.</li>
</ul>
<hr class="lite">
<details>
   <summary class="subtitle"> Прочитал ЧаВо о скрытых настройках. "Ничего не понял, но было интересно &copy;".</summary>
<p class="sub_subtitle">Странно, до вас никто не жаловался. Что ж, давайте разжую. Вы захотели заменить символ звездочки...</p>
<details>
    <summary class="sub_subtitle">Если у вас портабельная версия FLibrary, то:</summary>
<ol>
<li> Закройте FLibrary</li>
<li>Откройте в текстовом редакторе файл FLibrary.ini из папки программы</li>
<li>Найдите в нём раздел [Preferences] и добавьте в него строку `LibRate\symbol=9734`</li>
<li>Сохраните файл</li>
<li>Запустите FLibrary</li>
</ol>
<p class="img"><img src="img/hide_set/1_500.jpg" alt="&#128558; Йок картинка, бро!" class="img500"></p>
<p class="note">* Вместо числа 9734 подберите своё по вкусу, например <a href="https://www.w3schools.com/charsets/ref_utf_symbols.asp" target="_blank"><b>отсюда</b></a>.</p>
<hr class="lite">
</details>
<details>
    <summary class="sub_subtitle">Если ваша версия FLibrary установлена инсталлятором, то:</summary>
<ol>
<li>Закройте FLibrary</li>
<li>Запустите редактор реестра</li>
<li>Перейдите к ветке `HKEY_CURRENT_USER\Software\HomeCompa\FLibrary\Preferences`</li>
<li>Создайте (если его там нет) в этой ветке подраздел `LibRate`</li>
<li>Создайте в этом подразделе DWORD параметр `symbol`</li>
<li> Задайте параметру десятичное значение 9734 (оно же шестнадцатеричное 2606)</li>
<li>Запустите FLibrary</li>
</ol>
<p class="img"><img src="img/hide_set/0_700.jpg" alt="&#128558; Йок картинка, бро!" class="img700"></p>
<p class="note">* Вместо числа 9734 подберите своё по вкусу, например <a href="https://www.w3schools.com/charsets/ref_utf_symbols.asp" target="_blank"><b>отсюда</b></a>.</p>
<hr class="lite">
</details>
<hr class="lite">
</details>
<details>
   <summary class="subtitle"> Настроил конвертацию в epub файлов, которые скачиваю по web (opds), а все равно получаю fb2.</summary>
<p class="subtitle">В первую очередь проверьте пути (разделы) реестра на правильность. 
<br>В "Computer\HKEY_CURRENT_USER\Software\HomeCompa\FLibrary" уже есть раздел opds, по дереву выше нужного раздела с настройками "Preferences", это не он. 
<br>Все нужные разделы и подразделы нужно создавать в "Preferences"</p>
<p class="img"><img src="img/hide_set/3_1000.jpg" alt="&#128558; Йок картинка, бро!" class="img1000"></p>
<p class="subtitle">После чего проверьте на ошибки ключи (строки). 
<br>Для большинства конверторов обьязательны только два ключа "command" и "ext", а ключи "arguments" и "cwd" прописываем по желанию или по необходимости.</p>
<p class="note"> * назначение "CWD" - см. <a href="#offlink4">"Как сконвертировать книгу из fb2"</a>
<br>.</p>
<details>
    <summary class="sub_subtitle">Вот так выглядит файл.reg со всеми прописаными ключами=></summary>
<p class="code">Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\HomeCompa\FLibrary\Preferences\opds\converter]
"ext"="epub"
"command"="C:\\Program Files\\fb2epub\\Fb2ePub.exe"
"arguments"="\"%src%\" \"%dst%\""
"cwd"="C:\\Program Files\\fb2epub"

</p>
</details>
</details>
<hr>
</details>
<h2 id="footer"> ----------
<br><a href="https://github.com/heimdallr" target="_blank">Copyright (c) 2021-2026 Александр Чирятьев</a>
<br>----------</h2>
</div>
</body>
</html>
